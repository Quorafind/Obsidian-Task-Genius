import { findContinuousTaskBlocks, SortableTaskStatus, } from "../commands/sortTaskCommands";
// 创建SortableTask的辅助函数
function createMockTask(lineNumber, indentation = 0, children = [], completed = false) {
    const status = completed ? "x" : " ";
    return {
        id: `test-${lineNumber}`,
        lineNumber,
        indentation,
        children,
        parent: undefined,
        calculatedStatus: completed
            ? SortableTaskStatus.Completed
            : SortableTaskStatus.Incomplete,
        originalMarkdown: `${" ".repeat(indentation)}- [${status}] Task at line ${lineNumber}`,
        status,
        completed,
        content: `Task at line ${lineNumber}`,
        tags: [],
        metadata: {
            tags: [],
            children: [],
            project: "",
            context: "",
            priority: 0,
        },
    };
}
describe("findContinuousTaskBlocks", () => {
    it("应该能够识别连续的任务块", () => {
        // 创建模拟任务数据
        const mockTasks = [
            // 第一个任务块（连续行号：0,1,2）
            createMockTask(0),
            createMockTask(1),
            createMockTask(2),
            // 第二个任务块（连续行号：5,6）- 与第一个块之间有空行
            createMockTask(5),
            createMockTask(6),
        ];
        // 执行函数
        const blocks = findContinuousTaskBlocks(mockTasks);
        // 验证结果
        expect(blocks.length).toBe(2); // 应该识别出两个不连续的任务块
        expect(blocks[0].length).toBe(3); // 第一个块有3个任务
        expect(blocks[1].length).toBe(2); // 第二个块有2个任务
        // 验证块中任务的行号
        expect(blocks[0].map((t) => t.lineNumber)).toEqual([0, 1, 2]);
        expect(blocks[1].map((t) => t.lineNumber)).toEqual([5, 6]);
    });
    it("应该正确处理带有子任务的任务块", () => {
        // 创建子任务
        const childTask1 = createMockTask(1, 2);
        const childTask2 = createMockTask(2, 2);
        // 创建带有子任务的模拟数据
        const parentTask = createMockTask(0, 0, [childTask1, childTask2]);
        childTask1.parent = parentTask;
        childTask2.parent = parentTask;
        const mockTasks = [
            // 任务块1：父任务（包含子任务）
            parentTask,
            // 任务块2：独立任务
            createMockTask(5),
        ];
        // 执行函数
        const blocks = findContinuousTaskBlocks(mockTasks);
        // 验证结果
        expect(blocks.length).toBe(2); // 应该识别出两个不连续的任务块
        // 验证第一个块包含父任务
        expect(blocks[0].length).toBe(1);
        expect(blocks[0][0].lineNumber).toBe(0);
        expect(blocks[0][0].children.length).toBe(2);
        expect(blocks[0][0].children[0].lineNumber).toBe(1);
        expect(blocks[0][0].children[1].lineNumber).toBe(2);
        // 验证第二个块包含独立任务
        expect(blocks[1].length).toBe(1);
        expect(blocks[1][0].lineNumber).toBe(5);
    });
    it("应该将任务及其子任务视为一个连续块", () => {
        // 创建一个带有子任务的任务，子任务在不连续的行
        const child1 = createMockTask(2, 2);
        const child2 = createMockTask(4, 2);
        const parent1 = createMockTask(0, 0, [child1]);
        child1.parent = parent1;
        const parent2 = createMockTask(3, 0, [child2]);
        child2.parent = parent2;
        const mockTasks = [parent1, parent2];
        // 执行函数 - 行号是 0, 2, 3, 4
        const blocks = findContinuousTaskBlocks(mockTasks);
        // 验证结果 - 应该是一个连续块，因为父任务的最大行号 + 1 >= 下一个任务的行号
        expect(blocks.length).toBe(1); // 应该识别为一个连续块
        expect(blocks[0].length).toBe(2); // 包含两个父任务
    });
    it("在没有任务的情况下应返回空数组", () => {
        const emptyTasks = [];
        const blocks = findContinuousTaskBlocks(emptyTasks);
        expect(blocks).toEqual([]);
    });
    it("对于乱序输入的任务应正确排序并分组", () => {
        // 创建乱序排列的任务
        const mockTasks = [
            createMockTask(5),
            createMockTask(1),
            createMockTask(6),
            createMockTask(0),
            createMockTask(2), // 第一个块
        ];
        // 执行函数
        const blocks = findContinuousTaskBlocks(mockTasks);
        // 验证结果 - 应该先排序，然后分成两个块
        expect(blocks.length).toBe(2);
        // 第一个块（0,1,2）
        expect(blocks[0].length).toBe(3);
        expect(blocks[0].map((t) => t.lineNumber).sort()).toEqual([0, 1, 2]);
        // 第二个块（5,6）
        expect(blocks[1].length).toBe(2);
        expect(blocks[1].map((t) => t.lineNumber).sort()).toEqual([5, 6]);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmluZENvbnRpbnVvdXNUYXNrQmxvY2tzLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaW5kQ29udGludW91c1Rhc2tCbG9ja3MudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sd0JBQXdCLEVBRXhCLGtCQUFrQixHQUNsQixNQUFNLDhCQUE4QixDQUFDO0FBRXRDLHNCQUFzQjtBQUN0QixTQUFTLGNBQWMsQ0FDdEIsVUFBa0IsRUFDbEIsY0FBc0IsQ0FBQyxFQUN2QixXQUEyQixFQUFFLEVBQzdCLFlBQXFCLEtBQUs7SUFFMUIsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUNyQyxPQUFPO1FBQ04sRUFBRSxFQUFFLFFBQVEsVUFBVSxFQUFFO1FBQ3hCLFVBQVU7UUFDVixXQUFXO1FBQ1gsUUFBUTtRQUNSLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLGdCQUFnQixFQUFFLFNBQVM7WUFDMUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLFNBQVM7WUFDOUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLFVBQVU7UUFDaEMsZ0JBQWdCLEVBQUUsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUM5QixXQUFXLENBQ1gsTUFBTSxNQUFNLGtCQUFrQixVQUFVLEVBQUU7UUFDM0MsTUFBTTtRQUNOLFNBQVM7UUFDVCxPQUFPLEVBQUUsZ0JBQWdCLFVBQVUsRUFBRTtRQUNyQyxJQUFJLEVBQUUsRUFBRTtRQUNSLFFBQVEsRUFBRTtZQUNULElBQUksRUFBRSxFQUFFO1lBQ1IsUUFBUSxFQUFFLEVBQUU7WUFDWixPQUFPLEVBQUUsRUFBRTtZQUNYLE9BQU8sRUFBRSxFQUFFO1lBQ1gsUUFBUSxFQUFFLENBQUM7U0FDWDtLQUNlLENBQUM7QUFDbkIsQ0FBQztBQUVELFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDekMsRUFBRSxDQUFDLGNBQWMsRUFB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Q0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckUsWUFBWTtRQUNaLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuRSxDQUFDLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuXHRmaW5kQ29udGludW91c1Rhc2tCbG9ja3MsXHJcblx0U29ydGFibGVUYXNrLFxyXG5cdFNvcnRhYmxlVGFza1N0YXR1cyxcclxufSBmcm9tIFwiLi4vY29tbWFuZHMvc29ydFRhc2tDb21tYW5kc1wiO1xyXG5cclxuLy8g5Yib5bu6U29ydGFibGVUYXNr55qE6L6F5Yqp5Ye95pWwXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tUYXNrKFxyXG5cdGxpbmVOdW1iZXI6IG51bWJlcixcclxuXHRpbmRlbnRhdGlvbjogbnVtYmVyID0gMCxcclxuXHRjaGlsZHJlbjogU29ydGFibGVUYXNrW10gPSBbXSxcclxuXHRjb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZVxyXG4pOiBTb3J0YWJsZVRhc2sge1xyXG5cdGNvbnN0IHN0YXR1cyA9IGNvbXBsZXRlZCA/IFwieFwiIDogXCIgXCI7XHJcblx0cmV0dXJuIHtcclxuXHRcdGlkOiBgdGVzdC0ke2xpbmVOdW1iZXJ9YCxcclxuXHRcdGxpbmVOdW1iZXIsXHJcblx0XHRpbmRlbnRhdGlvbixcclxuXHRcdGNoaWxkcmVuLFxyXG5cdFx0cGFyZW50OiB1bmRlZmluZWQsXHJcblx0XHRjYWxjdWxhdGVkU3RhdHVzOiBjb21wbGV0ZWRcclxuXHRcdFx0PyBTb3J0YWJsZVRhc2tTdGF0dXMuQ29tcGxldGVkXHJcblx0XHRcdDogU29ydGFibGVUYXNrU3RhdHVzLkluY29tcGxldGUsXHJcblx0XHRvcmlnaW5hbE1hcmtkb3duOiBgJHtcIiBcIi5yZXBlYXQoXHJcblx0XHRcdGluZGVudGF0aW9uXHJcblx0XHQpfS0gWyR7c3RhdHVzfV0gVGFzayBhdCBsaW5lICR7bGluZU51bWJlcn1gLFxyXG5cdFx0c3RhdHVzLFxyXG5cdFx0Y29tcGxldGVkLFxyXG5cdFx0Y29udGVudDogYFRhc2sgYXQgbGluZSAke2xpbmVOdW1iZXJ9YCxcclxuXHRcdHRhZ3M6IFtdLFxyXG5cdFx0bWV0YWRhdGE6IHtcclxuXHRcdFx0dGFnczogW10sXHJcblx0XHRcdGNoaWxkcmVuOiBbXSxcclxuXHRcdFx0cHJvamVjdDogXCJcIixcclxuXHRcdFx0Y29udGV4dDogXCJcIixcclxuXHRcdFx0cHJpb3JpdHk6IDAsXHJcblx0XHR9LFxyXG5cdH0gYXMgU29ydGFibGVUYXNrO1xyXG59XHJcblxyXG5kZXNjcmliZShcImZpbmRDb250aW51b3VzVGFza0Jsb2Nrc1wiLCAoKSA9PiB7XHJcblx0aXQoXCLlupTor6Xog73lpJ/or4bliKvov57nu63nmoTku7vliqHlnZdcIiwgKCkgPT4ge1xyXG5cdFx0Ly8g5Yib5bu65qih5ouf5Lu75Yqh5pWw5o2uXHJcblx0XHRjb25zdCBtb2NrVGFza3M6IFNvcnRhYmxlVGFza1tdID0gW1xyXG5cdFx0XHQvLyDnrKzkuIDkuKrku7vliqHlnZfvvIjov57nu63ooYzlj7fvvJowLDEsMu+8iVxyXG5cdFx0XHRjcmVhdGVNb2NrVGFzaygwKSxcclxuXHRcdFx0Y3JlYXRlTW9ja1Rhc2soMSksXHJcblx0XHRcdGNyZWF0ZU1vY2tUYXNrKDIpLFxyXG5cclxuXHRcdFx0Ly8g56ys5LqM5Liq5Lu75Yqh5Z2X77yI6L+e57ut6KGM5Y+377yaNSw277yJLSDkuI7nrKzkuIDkuKrlnZfkuYvpl7TmnInnqbrooYxcclxuXHRcdFx0Y3JlYXRlTW9ja1Rhc2soNSksXHJcblx0XHRcdGNyZWF0ZU1vY2tUYXNrKDYpLFxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyDmiafooYzlh73mlbBcclxuXHRcdGNvbnN0IGJsb2NrcyA9IGZpbmRDb250aW51b3VzVGFza0Jsb2Nrcyhtb2NrVGFza3MpO1xyXG5cclxuXHRcdC8vIOmqjOivgee7k+aenFxyXG5cdFx0ZXhwZWN0KGJsb2Nrcy5sZW5ndGgpLnRvQmUoMik7IC8vIOW6lOivpeivhuWIq+WHuuS4pOS4quS4jei/nue7reeahOS7u+WKoeWdl1xyXG5cdFx0ZXhwZWN0KGJsb2Nrc1swXS5sZW5ndGgpLnRvQmUoMyk7IC8vIOesrOS4gOS4quWdl+aciTPkuKrku7vliqFcclxuXHRcdGV4cGVjdChibG9ja3NbMV0ubGVuZ3RoKS50b0JlKDIpOyAvLyDnrKzkuozkuKrlnZfmnIky5Liq5Lu75YqhXHJcblxyXG5cdFx0Ly8g6aqM6K+B5Z2X5Lit5Lu75Yqh55qE6KGM5Y+3XHJcblx0XHRleHBlY3QoYmxvY2tzWzBdLm1hcCgodCkgPT4gdC5saW5lTnVtYmVyKSkudG9FcXVhbChbMCwgMSwgMl0pO1xyXG5cdFx0ZXhwZWN0KGJsb2Nrc1sxXS5tYXAoKHQpID0+IHQubGluZU51bWJlcikpLnRvRXF1YWwoWzUsIDZdKTtcclxuXHR9KTtcclxuXHJcblx0aXQoXCLlupTor6XmraPnoa7lpITnkIbluKbmnInlrZDku7vliqHnmoTku7vliqHlnZdcIiwgKCkgPT4ge1xyXG5cdFx0Ly8g5Yib5bu65a2Q5Lu75YqhXHJcblx0XHRjb25zdCBjaGlsZFRhc2sxID0gY3JlYXRlTW9ja1Rhc2soMSwgMik7XHJcblx0XHRjb25zdCBjaGlsZFRhc2syID0gY3JlYXRlTW9ja1Rhc2soMiwgMik7XHJcblxyXG5cdFx0Ly8g5Yib5bu65bim5pyJ5a2Q5Lu75Yqh55qE5qih5ouf5pWw5o2uXHJcblx0XHRjb25zdCBwYXJlbnRUYXNrID0gY3JlYXRlTW9ja1Rhc2soMCwgMCwgW2NoaWxkVGFzazEsIGNoaWxkVGFzazJdKTtcclxuXHRcdGNoaWxkVGFzazEucGFyZW50ID0gcGFyZW50VGFzaztcclxuXHRcdGNoaWxkVGFzazIucGFyZW50ID0gcGFyZW50VGFzaztcclxuXHJcblx0XHRjb25zdCBtb2NrVGFza3M6IFNvcnRhYmxlVGFza1tdID0gW1xyXG5cdFx0XHQvLyDku7vliqHlnZcx77ya54i25Lu75Yqh77yI5YyF5ZCr5a2Q5Lu75Yqh77yJXHJcblx0XHRcdHBhcmVudFRhc2ssXHJcblxyXG5cdFx0XHQvLyDku7vliqHlnZcy77ya54us56uL5Lu75YqhXHJcblx0XHRcdGNyZWF0ZU1vY2tUYXNrKDUpLFxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyDmiafooYzlh73mlbBcclxuXHRcdGNvbnN0IGJsb2NrcyA9IGZpbmRDb250aW51b3VzVGFza0Jsb2Nrcyhtb2NrVGFza3MpO1xyXG5cclxuXHRcdC8vIOmqjOivgee7k+aenFxyXG5cdFx0ZXhwZWN0KGJsb2Nrcy5sZW5ndGgpLnRvQmUoMik7IC8vIOW6lOivpeivhuWIq+WHuuS4pOS4quS4jei/nue7reeahOS7u+WKoeWdl1xyXG5cclxuXHRcdC8vIOmqjOivgeesrOS4gOS4quWdl+WMheWQq+eItuS7u+WKoVxyXG5cdFx0ZXhwZWN0KGJsb2Nrc1swXS5sZW5ndGgpLnRvQmUoMSk7XHJcblx0XHRleHBlY3QoYmxvY2tzWzBdWzBdLmxpbmVOdW1iZXIpLnRvQmUoMCk7XHJcblx0XHRleHBlY3QoYmxvY2tzWzBdWzBdLmNoaWxkcmVuLmxlbmd0aCkudG9CZSgyKTtcclxuXHRcdGV4cGVjdChibG9ja3NbMF1bMF0uY2hpbGRyZW5bMF0ubGluZU51bWJlcikudG9CZSgxKTtcclxuXHRcdGV4cGVjdChibG9ja3NbMF1bMF0uY2hpbGRyZW5bMV0ubGluZU51bWJlcikudG9CZSgyKTtcclxuXHJcblx0XHQvLyDpqozor4HnrKzkuozkuKrlnZfljIXlkKvni6znq4vku7vliqFcclxuXHRcdGV4cGVjdChibG9ja3NbMV0ubGVuZ3RoKS50b0JlKDEpO1xyXG5cdFx0ZXhwZWN0KGJsb2Nrc1sxXVswXS5saW5lTnVtYmVyKS50b0JlKDUpO1xyXG5cdH0pO1xyXG5cclxuXHRpdChcIuW6lOivpeWwhuS7u+WKoeWPiuWFtuWtkOS7u+WKoeinhuS4uuS4gOS4qui/nue7reWdl1wiLCAoKSA9PiB7XHJcblx0XHQvLyDliJvlu7rkuIDkuKrluKbmnInlrZDku7vliqHnmoTku7vliqHvvIzlrZDku7vliqHlnKjkuI3ov57nu63nmoTooYxcclxuXHRcdGNvbnN0IGNoaWxkMSA9IGNyZWF0ZU1vY2tUYXNrKDIsIDIpO1xyXG5cdFx0Y29uc3QgY2hpbGQyID0gY3JlYXRlTW9ja1Rhc2soNCwgMik7XHJcblxyXG5cdFx0Y29uc3QgcGFyZW50MSA9IGNyZWF0ZU1vY2tUYXNrKDAsIDAsIFtjaGlsZDFdKTtcclxuXHRcdGNoaWxkMS5wYXJlbnQgPSBwYXJlbnQxO1xyXG5cclxuXHRcdGNvbnN0IHBhcmVudDIgPSBjcmVhdGVNb2NrVGFzaygzLCAwLCBbY2hpbGQyXSk7XHJcblx0XHRjaGlsZDIucGFyZW50ID0gcGFyZW50MjtcclxuXHJcblx0XHRjb25zdCBtb2NrVGFza3M6IFNvcnRhYmxlVGFza1tdID0gW3BhcmVudDEsIHBhcmVudDJdO1xyXG5cclxuXHRcdC8vIOaJp+ihjOWHveaVsCAtIOihjOWPt+aYryAwLCAyLCAzLCA0XHJcblx0XHRjb25zdCBibG9ja3MgPSBmaW5kQ29udGludW91c1Rhc2tCbG9ja3MobW9ja1Rhc2tzKTtcclxuXHJcblx0XHQvLyDpqozor4Hnu5PmnpwgLSDlupTor6XmmK/kuIDkuKrov57nu63lnZfvvIzlm6DkuLrniLbku7vliqHnmoTmnIDlpKfooYzlj7cgKyAxID49IOS4i+S4gOS4quS7u+WKoeeahOihjOWPt1xyXG5cdFx0ZXhwZWN0KGJsb2Nrcy5sZW5ndGgpLnRvQmUoMSk7IC8vIOW6lOivpeivhuWIq+S4uuS4gOS4qui/nue7reWdl1xyXG5cdFx0ZXhwZWN0KGJsb2Nrc1swXS5sZW5ndGgpLnRvQmUoMik7IC8vIOWMheWQq+S4pOS4queItuS7u+WKoVxyXG5cdH0pO1xyXG5cclxuXHRpdChcIuWcqOayoeacieS7u+WKoeeahOaDheWGteS4i+W6lOi/lOWbnuepuuaVsOe7hFwiLCAoKSA9PiB7XHJcblx0XHRjb25zdCBlbXB0eVRhc2tzOiBTb3J0YWJsZVRhc2tbXSA9IFtdO1xyXG5cdFx0Y29uc3QgYmxvY2tzID0gZmluZENvbnRpbnVvdXNUYXNrQmxvY2tzKGVtcHR5VGFza3MpO1xyXG5cdFx0ZXhwZWN0KGJsb2NrcykudG9FcXVhbChbXSk7XHJcblx0fSk7XHJcblxyXG5cdGl0KFwi5a+55LqO5Lmx5bqP6L6T5YWl55qE5Lu75Yqh5bqU5q2j56Gu5o6S5bqP5bm25YiG57uEXCIsICgpID0+IHtcclxuXHRcdC8vIOWIm+W7uuS5seW6j+aOkuWIl+eahOS7u+WKoVxyXG5cdFx0Y29uc3QgbW9ja1Rhc2tzOiBTb3J0YWJsZVRhc2tbXSA9IFtcclxuXHRcdFx0Y3JlYXRlTW9ja1Rhc2soNSksIC8vIOesrOS6jOS4quWdl1xyXG5cdFx0XHRjcmVhdGVNb2NrVGFzaygxKSwgLy8g56ys5LiA5Liq5Z2XXHJcblx0XHRcdGNyZWF0ZU1vY2tUYXNrKDYpLCAvLyDnrKzkuozkuKrlnZdcclxuXHRcdFx0Y3JlYXRlTW9ja1Rhc2soMCksIC8vIOesrOS4gOS4quWdl1xyXG5cdFx0XHRjcmVhdGVNb2NrVGFzaygyKSwgLy8g56ys5LiA5Liq5Z2XXHJcblx0XHRdO1xyXG5cclxuXHRcdC8vIOaJp+ihjOWHveaVsFxyXG5cdFx0Y29uc3QgYmxvY2tzID0gZmluZENvbnRpbnVvdXNUYXNrQmxvY2tzKG1vY2tUYXNrcyk7XHJcblxyXG5cdFx0Ly8g6aqM6K+B57uT5p6cIC0g5bqU6K+l5YWI5o6S5bqP77yM54S25ZCO5YiG5oiQ5Lik5Liq5Z2XXHJcblx0XHRleHBlY3QoYmxvY2tzLmxlbmd0aCkudG9CZSgyKTtcclxuXHJcblx0XHQvLyDnrKzkuIDkuKrlnZfvvIgwLDEsMu+8iVxyXG5cdFx0ZXhwZWN0KGJsb2Nrc1swXS5sZW5ndGgpLnRvQmUoMyk7XHJcblx0XHRleHBlY3QoYmxvY2tzWzBdLm1hcCgodCkgPT4gdC5saW5lTnVtYmVyKS5zb3J0KCkpLnRvRXF1YWwoWzAsIDEsIDJdKTtcclxuXHJcblx0XHQvLyDnrKzkuozkuKrlnZfvvIg1LDbvvIlcclxuXHRcdGV4cGVjdChibG9ja3NbMV0ubGVuZ3RoKS50b0JlKDIpO1xyXG5cdFx0ZXhwZWN0KGJsb2Nrc1sxXS5tYXAoKHQpID0+IHQubGluZU51bWJlcikuc29ydCgpKS50b0VxdWFsKFs1LCA2XSk7XHJcblx0fSk7XHJcbn0pO1xyXG4iXX0=