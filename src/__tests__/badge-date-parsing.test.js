/**
 * Badge Date Parsing Tests
 * Tests to verify date parsing issues in getBadgeEventsForDate
 */
import { moment } from "obsidian";
describe("Badge Date Parsing", () => {
    describe("Date input parsing", () => {
        test("should handle different date input formats", () => {
            console.log("=== Date Input Parsing Debug ===");
            // Test the actual data you provided
            const realIcsEventDate = "2020-01-31T16:00:00.000Z";
            const realQueryDate = "Sun Jul 06 2025 00:00:00 GMT+0800 (China Standard Time)";
            console.log("Real ICS event date:", realIcsEventDate);
            console.log("Real query date:", realQueryDate);
            // Parse the ICS event date
            const icsDate = new Date(realIcsEventDate);
            console.log("Parsed ICS date:", icsDate);
            console.log("ICS date ISO:", icsDate.toISOString());
            // Parse the query date (this might be the problem)
            const queryDate = new Date(realQueryDate);
            console.log("Parsed query date:", queryDate);
            console.log("Query date ISO:", queryDate.toISOString());
            console.log("Query date valid:", !isNaN(queryDate.getTime()));
            // Test moment parsing
            const icsMoment = moment(icsDate).startOf("day");
            const queryMoment = moment(queryDate).startOf("day");
            console.log("ICS moment:", icsMoment.format("YYYY-MM-DD"));
            console.log("Query moment:", queryMoment.format("YYYY-MM-DD"));
            // These should obviously not match (2020 vs 2025)
            const shouldMatch = icsMoment.isSame(queryMoment);
            console.log("Should match (obviously no):", shouldMatch);
            expect(shouldMatch).toBe(false); // They shouldn't match
        });
        test("should test various date string formats that might be passed", () => {
            console.log("\n=== Various Date Format Tests ===");
            const testFormats = [
                "Sun Jul 06 2025 00:00:00 GMT+0800 (China Standard Time)",
                "2025-07-06",
                "2025-07-06T00:00:00.000Z",
                "2025-07-06T00:00:00+08:00",
                new Date("2025-07-06"),
                new Date("2025-07-06T00:00:00.000Z"),
                1751731200000, // timestamp for 2025-07-06
            ];
            testFormats.forEach((dateInput, index) => {
                console.log(`\nTest ${index + 1}: ${typeof dateInput} - ${dateInput}`);
                try {
                    const parsedDate = new Date(dateInput);
                    console.log("  Parsed:", parsedDate);
                    console.log("  ISO:", parsedDate.toISOString());
                    console.log("  Valid:", !isNaN(parsedDate.getTime()));
                    const momentDate = moment(parsedDate).startOf("day");
                    console.log("  Moment:", momentDate.format("YYYY-MM-DD"));
                }
                catch (error) {
                    console.log("  Error:", error);
                }
            });
        });
        test("should test the specific scenario with real data", () => {
            console.log("\n=== Real Scenario Test ===");
            // Your real ICS task data
            const icsTask = {
                id: "ics-ics-1749431536058-nzoj4uxtw-2020-02-01-lc@infinet.github.io",
                content: "正月初八|六 2-1",
                filePath: "ics://农历",
                line: 0,
                completed: false,
                status: " ",
                originalMarkdown: "- [ ] 正月初八|六 2-1",
                metadata: {
                    tags: [],
                    children: [],
                    startDate: 1580486400000,
                    dueDate: 1580486400000,
                    scheduledDate: 1580486400000,
                    project: "农历",
                    heading: [],
                },
                icsEvent: {
                    uid: "2020-02-01-lc@infinet.github.io",
                    summary: "正月初八|六 2-1",
                    dtstart: "2020-01-31T16:00:00.000Z",
                    allDay: true,
                    source: {
                        id: "ics-1749431536058-nzoj4uxtw",
                        name: "农历",
                        url: "https://lwlsw.github.io/Chinese-Lunar-Calendar-ics/chinese_lunar_my.ics",
                        enabled: true,
                        refreshInterval: 60,
                        showAllDayEvents: true,
                        showTimedEvents: true,
                        showType: "badge",
                    },
                    dtend: "2020-01-31T16:00:00.000Z",
                    status: "CONFIRMED",
                },
                readonly: true,
                source: {
                    type: "ics",
                    name: "农历",
                    id: "ics-1749431536058-nzoj4uxtw",
                },
            };
            // Test different ways the date might be passed to getBadgeEventsForDate
            const possibleDateInputs = [
                "Sun Jul 06 2025 00:00:00 GMT+0800 (China Standard Time)",
                new Date("Sun Jul 06 2025 00:00:00 GMT+0800 (China Standard Time)"),
                new Date("2025-07-06"),
                new Date(2025, 6, 6), // Month is 0-based
            ];
            possibleDateInputs.forEach((dateInput, index) => {
                console.log(`\nDate input ${index + 1}:`, dateInput);
                // Simulate getBadgeEventsForDate logic
                const targetDate = moment(dateInput).startOf("day");
                const eventDate = moment(icsTask.icsEvent.dtstart).startOf("day");
                console.log("  Target date moment:", targetDate.format("YYYY-MM-DD"));
                console.log("  Event date moment:", eventDate.format("YYYY-MM-DD"));
                console.log("  Dates match:", eventDate.isSame(targetDate));
                console.log("  String comparison:", eventDate.format("YYYY-MM-DD") ===
                    targetDate.format("YYYY-MM-DD"));
            });
        });
        test("should test if the issue is with dtstart being a string", () => {
            console.log("\n=== dtstart String vs Date Test ===");
            const dtstartString = "2020-01-31T16:00:00.000Z";
            const dtstartDate = new Date(dtstartString);
            console.log("dtstart as string:", dtstartString);
            console.log("dtstart as Date:", dtstartDate);
            // Test moment parsing of both
            const momentFromString = moment(dtstartString).startOf("day");
            const momentFromDate = moment(dtstartDate).startOf("day");
            console.log("Moment from string:", momentFromString.format("YYYY-MM-DD"));
            console.log("Moment from Date:", momentFromDate.format("YYYY-MM-DD"));
            console.log("Both moments equal:", momentFromString.isSame(momentFromDate));
            // Test with a target date
            const targetDate = moment(new Date("2020-01-31")).startOf("day");
            console.log("Target date:", targetDate.format("YYYY-MM-DD"));
            console.log("String moment matches target:", momentFromString.isSame(targetDate));
            console.log("Date moment matches target:", momentFromDate.isSame(targetDate));
        });
        test("should test timezone handling", () => {
            console.log("\n=== Timezone Handling Test ===");
            // The ICS event is at 16:00 UTC on 2020-01-31
            // In China timezone (GMT+8), this would be 00:00 on 2020-02-01
            const dtstartUTC = "2020-01-31T16:00:00.000Z";
            const date = new Date(dtstartUTC);
            console.log("UTC date:", date.toISOString());
            console.log("Local date string:", date.toString());
            console.log("Local date only:", date.toDateString());
            // Test different ways to get the local date
            const localYear = date.getFullYear();
            const localMonth = date.getMonth();
            const localDay = date.getDate();
            console.log("Local components:", localYear, localMonth + 1, localDay);
            // Create a local date for comparison
            const localDate = new Date(localYear, localMonth, localDay);
            console.log("Reconstructed local date:", localDate);
            // Test moment with different approaches
            const momentUTC = moment(date).startOf("day");
            const momentLocal = moment(localDate).startOf("day");
            console.log("Moment UTC startOf day:", momentUTC.format("YYYY-MM-DD"));
            console.log("Moment local startOf day:", momentLocal.format("YYYY-MM-DD"));
            // Test if they match a target date of 2020-02-01 (local date)
            const targetDate = moment(new Date("2020-02-01")).startOf("day");
            console.log("Target date:", targetDate.format("YYYY-MM-DD"));
            console.log("UTC moment matches:", momentUTC.isSame(targetDate));
            console.log("Local moment matches:", momentLocal.isSame(targetDate));
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFkZ2UtZGF0ZS1wYXJzaW5nLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiYWRnZS1kYXRlLXBhcnNpbmcudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7QUFFSCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRWxDLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbkMsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxJQUFJLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQztZQUVoRCxvQ0FBb0M7WUFDcEMsTUFBTSxnQkFBZ0IsR0FBRywwQkFBMEIsQ0FBQztZQUNwRCxNQUFNLGFBQWEsR0FDbEIseURBQXlELENBQUM7WUFFM0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFL0MsMkJBQTJCO1lBQzNCLE1BQU0sT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUVwRCxtREFBbUQ7WUFDbkQsTUFBTSxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDMUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lB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QUFPLENBQUMsR0FBRyxDQUNWLDJCQUEyQixFQUMzQixXQUFXLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUNoQyxDQUFDO1lBRUYsOERBQThEO1lBQzlELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqRSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDakUsT0FBTyxDQUFDLEdBQUcsQ0FDVix1QkFBdUIsRUFDdkIsV0FBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FDOUIsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBCYWRnZSBEYXRlIFBhcnNpbmcgVGVzdHNcclxuICogVGVzdHMgdG8gdmVyaWZ5IGRhdGUgcGFyc2luZyBpc3N1ZXMgaW4gZ2V0QmFkZ2VFdmVudHNGb3JEYXRlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5kZXNjcmliZShcIkJhZGdlIERhdGUgUGFyc2luZ1wiLCAoKSA9PiB7XHJcblx0ZGVzY3JpYmUoXCJEYXRlIGlucHV0IHBhcnNpbmdcIiwgKCkgPT4ge1xyXG5cdFx0dGVzdChcInNob3VsZCBoYW5kbGUgZGlmZmVyZW50IGRhdGUgaW5wdXQgZm9ybWF0c1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiPT09IERhdGUgSW5wdXQgUGFyc2luZyBEZWJ1ZyA9PT1cIik7XHJcblxyXG5cdFx0XHQvLyBUZXN0IHRoZSBhY3R1YWwgZGF0YSB5b3UgcHJvdmlkZWRcclxuXHRcdFx0Y29uc3QgcmVhbEljc0V2ZW50RGF0ZSA9IFwiMjAyMC0wMS0zMVQxNjowMDowMC4wMDBaXCI7XHJcblx0XHRcdGNvbnN0IHJlYWxRdWVyeURhdGUgPVxyXG5cdFx0XHRcdFwiU3VuIEp1bCAwNiAyMDI1IDAwOjAwOjAwIEdNVCswODAwIChDaGluYSBTdGFuZGFyZCBUaW1lKVwiO1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coXCJSZWFsIElDUyBldmVudCBkYXRlOlwiLCByZWFsSWNzRXZlbnREYXRlKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJSZWFsIHF1ZXJ5IGRhdGU6XCIsIHJlYWxRdWVyeURhdGUpO1xyXG5cclxuXHRcdFx0Ly8gUGFyc2UgdGhlIElDUyBldmVudCBkYXRlXHJcblx0XHRcdGNvbnN0IGljc0RhdGUgPSBuZXcgRGF0ZShyZWFsSWNzRXZlbnREYXRlKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJQYXJzZWQgSUNTIGRhdGU6XCIsIGljc0RhdGUpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIklDUyBkYXRlIElTTzpcIiwgaWNzRGF0ZS50b0lTT1N0cmluZygpKTtcclxuXHJcblx0XHRcdC8vIFBhcnNlIHRoZSBxdWVyeSBkYXRlICh0aGlzIG1pZ2h0IGJlIHRoZSBwcm9ibGVtKVxyXG5cdFx0XHRjb25zdCBxdWVyeURhdGUgPSBuZXcgRGF0ZShyZWFsUXVlcnlEYXRlKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJQYXJzZWQgcXVlcnkgZGF0ZTpcIiwgcXVlcnlEYXRlKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJRdWVyeSBkYXRlIElTTzpcIiwgcXVlcnlEYXRlLnRvSVNPU3RyaW5nKCkpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlF1ZXJ5IGRhdGUgdmFsaWQ6XCIsICFpc05hTihxdWVyeURhdGUuZ2V0VGltZSgpKSk7XHJcblxyXG5cdFx0XHQvLyBUZXN0IG1vbWVudCBwYXJzaW5nXHJcblx0XHRcdGNvbnN0IGljc01vbWVudCA9IG1vbWVudChpY3NEYXRlKS5zdGFydE9mKFwiZGF5XCIpO1xyXG5cdFx0XHRjb25zdCBxdWVyeU1vbWVudCA9IG1vbWVudChxdWVyeURhdGUpLnN0YXJ0T2YoXCJkYXlcIik7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIklDUyBtb21lbnQ6XCIsIGljc01vbWVudC5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJRdWVyeSBtb21lbnQ6XCIsIHF1ZXJ5TW9tZW50LmZvcm1hdChcIllZWVktTU0tRERcIikpO1xyXG5cclxuXHRcdFx0Ly8gVGhlc2Ugc2hvdWxkIG9idmlvdXNseSBub3QgbWF0Y2ggKDIwMjAgdnMgMjAyNSlcclxuXHRcdFx0Y29uc3Qgc2hvdWxkTWF0Y2ggPSBpY3NNb21lbnQuaXNTYW1lKHF1ZXJ5TW9tZW50KTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJTaG91bGQgbWF0Y2ggKG9idmlvdXNseSBubyk6XCIsIHNob3VsZE1hdGNoKTtcclxuXHJcblx0XHRcdGV4cGVjdChzaG91bGRNYXRjaCkudG9CZShmYWxzZSk7IC8vIFRoZXkgc2hvdWxkbid0IG1hdGNoXHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIHRlc3QgdmFyaW91cyBkYXRlIHN0cmluZyBmb3JtYXRzIHRoYXQgbWlnaHQgYmUgcGFzc2VkXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJcXG49PT0gVmFyaW91cyBEYXRlIEZvcm1hdCBUZXN0cyA9PT1cIik7XHJcblxyXG5cdFx0XHRjb25zdCB0ZXN0Rm9ybWF0cyA9IFtcclxuXHRcdFx0XHRcIlN1biBKdWwgMDYgMjAyNSAwMDowMDowMCBHTVQrMDgwMCAoQ2hpbmEgU3RhbmRhcmQgVGltZSlcIixcclxuXHRcdFx0XHRcIjIwMjUtMDctMDZcIixcclxuXHRcdFx0XHRcIjIwMjUtMDctMDZUMDA6MDA6MDAuMDAwWlwiLFxyXG5cdFx0XHRcdFwiMjAyNS0wNy0wNlQwMDowMDowMCswODowMFwiLFxyXG5cdFx0XHRcdG5ldyBEYXRlKFwiMjAyNS0wNy0wNlwiKSxcclxuXHRcdFx0XHRuZXcgRGF0ZShcIjIwMjUtMDctMDZUMDA6MDA6MDAuMDAwWlwiKSxcclxuXHRcdFx0XHQxNzUxNzMxMjAwMDAwLCAvLyB0aW1lc3RhbXAgZm9yIDIwMjUtMDctMDZcclxuXHRcdFx0XTtcclxuXHJcblx0XHRcdHRlc3RGb3JtYXRzLmZvckVhY2goKGRhdGVJbnB1dCwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcdGBcXG5UZXN0ICR7aW5kZXggKyAxfTogJHt0eXBlb2YgZGF0ZUlucHV0fSAtICR7ZGF0ZUlucHV0fWBcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGVJbnB1dCBhcyBhbnkpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCIgIFBhcnNlZDpcIiwgcGFyc2VkRGF0ZSk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIiAgSVNPOlwiLCBwYXJzZWREYXRlLnRvSVNPU3RyaW5nKCkpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCIgIFZhbGlkOlwiLCAhaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKTtcclxuXHJcblx0XHRcdFx0XHRjb25zdCBtb21lbnREYXRlID0gbW9tZW50KHBhcnNlZERhdGUpLnN0YXJ0T2YoXCJkYXlcIik7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIiAgTW9tZW50OlwiLCBtb21lbnREYXRlLmZvcm1hdChcIllZWVktTU0tRERcIikpO1xyXG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIiAgRXJyb3I6XCIsIGVycm9yKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCB0ZXN0IHRoZSBzcGVjaWZpYyBzY2VuYXJpbyB3aXRoIHJlYWwgZGF0YVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiXFxuPT09IFJlYWwgU2NlbmFyaW8gVGVzdCA9PT1cIik7XHJcblxyXG5cdFx0XHQvLyBZb3VyIHJlYWwgSUNTIHRhc2sgZGF0YVxyXG5cdFx0XHRjb25zdCBpY3NUYXNrID0ge1xyXG5cdFx0XHRcdGlkOiBcImljcy1pY3MtMTc0OTQzMTUzNjA1OC1uem9qNHV4dHctMjAyMC0wMi0wMS1sY0BpbmZpbmV0LmdpdGh1Yi5pb1wiLFxyXG5cdFx0XHRcdGNvbnRlbnQ6IFwi5q2j5pyI5Yid5YWrfOWFrSAyLTFcIixcclxuXHRcdFx0XHRmaWxlUGF0aDogXCJpY3M6Ly/lhpzljoZcIixcclxuXHRcdFx0XHRsaW5lOiAwLFxyXG5cdFx0XHRcdGNvbXBsZXRlZDogZmFsc2UsXHJcblx0XHRcdFx0c3RhdHVzOiBcIiBcIixcclxuXHRcdFx0XHRvcmlnaW5hbE1hcmtkb3duOiBcIi0gWyBdIOato+aciOWIneWFq3zlha0gMi0xXCIsXHJcblx0XHRcdFx0bWV0YWRhdGE6IHtcclxuXHRcdFx0XHRcdHRhZ3M6IFtdLFxyXG5cdFx0XHRcdFx0Y2hpbGRyZW46IFtdLFxyXG5cdFx0XHRcdFx0c3RhcnREYXRlOiAxNTgwNDg2NDAwMDAwLFxyXG5cdFx0XHRcdFx0ZHVlRGF0ZTogMTU4MDQ4NjQwMDAwMCxcclxuXHRcdFx0XHRcdHNjaGVkdWxlZERhdGU6IDE1ODA0ODY0MDAwMDAsXHJcblx0XHRcdFx0XHRwcm9qZWN0OiBcIuWGnOWOhlwiLFxyXG5cdFx0XHRcdFx0aGVhZGluZzogW10sXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRpY3NFdmVudDoge1xyXG5cdFx0XHRcdFx0dWlkOiBcIjIwMjAtMDItMDEtbGNAaW5maW5ldC5naXRodWIuaW9cIixcclxuXHRcdFx0XHRcdHN1bW1hcnk6IFwi5q2j5pyI5Yid5YWrfOWFrSAyLTFcIixcclxuXHRcdFx0XHRcdGR0c3RhcnQ6IFwiMjAyMC0wMS0zMVQxNjowMDowMC4wMDBaXCIsXHJcblx0XHRcdFx0XHRhbGxEYXk6IHRydWUsXHJcblx0XHRcdFx0XHRzb3VyY2U6IHtcclxuXHRcdFx0XHRcdFx0aWQ6IFwiaWNzLTE3NDk0MzE1MzYwNTgtbnpvajR1eHR3XCIsXHJcblx0XHRcdFx0XHRcdG5hbWU6IFwi5Yac5Y6GXCIsXHJcblx0XHRcdFx0XHRcdHVybDogXCJodHRwczovL2x3bHN3LmdpdGh1Yi5pby9DaGluZXNlLUx1bmFyLUNhbGVuZGFyLWljcy9jaGluZXNlX2x1bmFyX215Lmljc1wiLFxyXG5cdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRyZWZyZXNoSW50ZXJ2YWw6IDYwLFxyXG5cdFx0XHRcdFx0XHRzaG93QWxsRGF5RXZlbnRzOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRzaG93VGltZWRFdmVudHM6IHRydWUsXHJcblx0XHRcdFx0XHRcdHNob3dUeXBlOiBcImJhZGdlXCIsXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZHRlbmQ6IFwiMjAyMC0wMS0zMVQxNjowMDowMC4wMDBaXCIsXHJcblx0XHRcdFx0XHRzdGF0dXM6IFwiQ09ORklSTUVEXCIsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRyZWFkb25seTogdHJ1ZSxcclxuXHRcdFx0XHRzb3VyY2U6IHtcclxuXHRcdFx0XHRcdHR5cGU6IFwiaWNzXCIsXHJcblx0XHRcdFx0XHRuYW1lOiBcIuWGnOWOhlwiLFxyXG5cdFx0XHRcdFx0aWQ6IFwiaWNzLTE3NDk0MzE1MzYwNTgtbnpvajR1eHR3XCIsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIFRlc3QgZGlmZmVyZW50IHdheXMgdGhlIGRhdGUgbWlnaHQgYmUgcGFzc2VkIHRvIGdldEJhZGdlRXZlbnRzRm9yRGF0ZVxyXG5cdFx0XHRjb25zdCBwb3NzaWJsZURhdGVJbnB1dHMgPSBbXHJcblx0XHRcdFx0XCJTdW4gSnVsIDA2IDIwMjUgMDA6MDA6MDAgR01UKzA4MDAgKENoaW5hIFN0YW5kYXJkIFRpbWUpXCIsXHJcblx0XHRcdFx0bmV3IERhdGUoXHJcblx0XHRcdFx0XHRcIlN1biBKdWwgMDYgMjAyNSAwMDowMDowMCBHTVQrMDgwMCAoQ2hpbmEgU3RhbmRhcmQgVGltZSlcIlxyXG5cdFx0XHRcdCksXHJcblx0XHRcdFx0bmV3IERhdGUoXCIyMDI1LTA3LTA2XCIpLFxyXG5cdFx0XHRcdG5ldyBEYXRlKDIwMjUsIDYsIDYpLCAvLyBNb250aCBpcyAwLWJhc2VkXHJcblx0XHRcdF07XHJcblxyXG5cdFx0XHRwb3NzaWJsZURhdGVJbnB1dHMuZm9yRWFjaCgoZGF0ZUlucHV0LCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBcXG5EYXRlIGlucHV0ICR7aW5kZXggKyAxfTpgLCBkYXRlSW5wdXQpO1xyXG5cclxuXHRcdFx0XHQvLyBTaW11bGF0ZSBnZXRCYWRnZUV2ZW50c0ZvckRhdGUgbG9naWNcclxuXHRcdFx0XHRjb25zdCB0YXJnZXREYXRlID0gbW9tZW50KGRhdGVJbnB1dCBhcyBhbnkpLnN0YXJ0T2YoXCJkYXlcIik7XHJcblx0XHRcdFx0Y29uc3QgZXZlbnREYXRlID0gbW9tZW50KGljc1Rhc2suaWNzRXZlbnQuZHRzdGFydCkuc3RhcnRPZihcclxuXHRcdFx0XHRcdFwiZGF5XCJcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcdFwiICBUYXJnZXQgZGF0ZSBtb21lbnQ6XCIsXHJcblx0XHRcdFx0XHR0YXJnZXREYXRlLmZvcm1hdChcIllZWVktTU0tRERcIilcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFxyXG5cdFx0XHRcdFx0XCIgIEV2ZW50IGRhdGUgbW9tZW50OlwiLFxyXG5cdFx0XHRcdFx0ZXZlbnREYXRlLmZvcm1hdChcIllZWVktTU0tRERcIilcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiICBEYXRlcyBtYXRjaDpcIiwgZXZlbnREYXRlLmlzU2FtZSh0YXJnZXREYXRlKSk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XHRcIiAgU3RyaW5nIGNvbXBhcmlzb246XCIsXHJcblx0XHRcdFx0XHRldmVudERhdGUuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSA9PT1cclxuXHRcdFx0XHRcdFx0dGFyZ2V0RGF0ZS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIHRlc3QgaWYgdGhlIGlzc3VlIGlzIHdpdGggZHRzdGFydCBiZWluZyBhIHN0cmluZ1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiXFxuPT09IGR0c3RhcnQgU3RyaW5nIHZzIERhdGUgVGVzdCA9PT1cIik7XHJcblxyXG5cdFx0XHRjb25zdCBkdHN0YXJ0U3RyaW5nID0gXCIyMDIwLTAxLTMxVDE2OjAwOjAwLjAwMFpcIjtcclxuXHRcdFx0Y29uc3QgZHRzdGFydERhdGUgPSBuZXcgRGF0ZShkdHN0YXJ0U3RyaW5nKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZHRzdGFydCBhcyBzdHJpbmc6XCIsIGR0c3RhcnRTdHJpbmcpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImR0c3RhcnQgYXMgRGF0ZTpcIiwgZHRzdGFydERhdGUpO1xyXG5cclxuXHRcdFx0Ly8gVGVzdCBtb21lbnQgcGFyc2luZyBvZiBib3RoXHJcblx0XHRcdGNvbnN0IG1vbWVudEZyb21TdHJpbmcgPSBtb21lbnQoZHRzdGFydFN0cmluZykuc3RhcnRPZihcImRheVwiKTtcclxuXHRcdFx0Y29uc3QgbW9tZW50RnJvbURhdGUgPSBtb21lbnQoZHRzdGFydERhdGUpLnN0YXJ0T2YoXCJkYXlcIik7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcIk1vbWVudCBmcm9tIHN0cmluZzpcIixcclxuXHRcdFx0XHRtb21lbnRGcm9tU3RyaW5nLmZvcm1hdChcIllZWVktTU0tRERcIilcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XCJNb21lbnQgZnJvbSBEYXRlOlwiLFxyXG5cdFx0XHRcdG1vbWVudEZyb21EYXRlLmZvcm1hdChcIllZWVktTU0tRERcIilcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XCJCb3RoIG1vbWVudHMgZXF1YWw6XCIsXHJcblx0XHRcdFx0bW9tZW50RnJvbVN0cmluZy5pc1NhbWUobW9tZW50RnJvbURhdGUpXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBUZXN0IHdpdGggYSB0YXJnZXQgZGF0ZVxyXG5cdFx0XHRjb25zdCB0YXJnZXREYXRlID0gbW9tZW50KG5ldyBEYXRlKFwiMjAyMC0wMS0zMVwiKSkuc3RhcnRPZihcImRheVwiKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJUYXJnZXQgZGF0ZTpcIiwgdGFyZ2V0RGF0ZS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XCJTdHJpbmcgbW9tZW50IG1hdGNoZXMgdGFyZ2V0OlwiLFxyXG5cdFx0XHRcdG1vbWVudEZyb21TdHJpbmcuaXNTYW1lKHRhcmdldERhdGUpXHJcblx0XHRcdCk7XHJcblx0XHRcdGNvbnNvbGUubG9nKFxyXG5cdFx0XHRcdFwiRGF0ZSBtb21lbnQgbWF0Y2hlcyB0YXJnZXQ6XCIsXHJcblx0XHRcdFx0bW9tZW50RnJvbURhdGUuaXNTYW1lKHRhcmdldERhdGUpXHJcblx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIHRlc3QgdGltZXpvbmUgaGFuZGxpbmdcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlxcbj09PSBUaW1lem9uZSBIYW5kbGluZyBUZXN0ID09PVwiKTtcclxuXHJcblx0XHRcdC8vIFRoZSBJQ1MgZXZlbnQgaXMgYXQgMTY6MDAgVVRDIG9uIDIwMjAtMDEtMzFcclxuXHRcdFx0Ly8gSW4gQ2hpbmEgdGltZXpvbmUgKEdNVCs4KSwgdGhpcyB3b3VsZCBiZSAwMDowMCBvbiAyMDIwLTAyLTAxXHJcblx0XHRcdGNvbnN0IGR0c3RhcnRVVEMgPSBcIjIwMjAtMDEtMzFUMTY6MDA6MDAuMDAwWlwiO1xyXG5cdFx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUoZHRzdGFydFVUQyk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlVUQyBkYXRlOlwiLCBkYXRlLnRvSVNPU3RyaW5nKCkpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkxvY2FsIGRhdGUgc3RyaW5nOlwiLCBkYXRlLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkxvY2FsIGRhdGUgb25seTpcIiwgZGF0ZS50b0RhdGVTdHJpbmcoKSk7XHJcblxyXG5cdFx0XHQvLyBUZXN0IGRpZmZlcmVudCB3YXlzIHRvIGdldCB0aGUgbG9jYWwgZGF0ZVxyXG5cdFx0XHRjb25zdCBsb2NhbFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcblx0XHRcdGNvbnN0IGxvY2FsTW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcblx0XHRcdGNvbnN0IGxvY2FsRGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcIkxvY2FsIGNvbXBvbmVudHM6XCIsXHJcblx0XHRcdFx0bG9jYWxZZWFyLFxyXG5cdFx0XHRcdGxvY2FsTW9udGggKyAxLFxyXG5cdFx0XHRcdGxvY2FsRGF5XHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgYSBsb2NhbCBkYXRlIGZvciBjb21wYXJpc29uXHJcblx0XHRcdGNvbnN0IGxvY2FsRGF0ZSA9IG5ldyBEYXRlKGxvY2FsWWVhciwgbG9jYWxNb250aCwgbG9jYWxEYXkpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlJlY29uc3RydWN0ZWQgbG9jYWwgZGF0ZTpcIiwgbG9jYWxEYXRlKTtcclxuXHJcblx0XHRcdC8vIFRlc3QgbW9tZW50IHdpdGggZGlmZmVyZW50IGFwcHJvYWNoZXNcclxuXHRcdFx0Y29uc3QgbW9tZW50VVRDID0gbW9tZW50KGRhdGUpLnN0YXJ0T2YoXCJkYXlcIik7XHJcblx0XHRcdGNvbnN0IG1vbWVudExvY2FsID0gbW9tZW50KGxvY2FsRGF0ZSkuc3RhcnRPZihcImRheVwiKTtcclxuXHJcblx0XHRcdGNvbnNvbGUubG9nKFxyXG5cdFx0XHRcdFwiTW9tZW50IFVUQyBzdGFydE9mIGRheTpcIixcclxuXHRcdFx0XHRtb21lbnRVVEMuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcIk1vbWVudCBsb2NhbCBzdGFydE9mIGRheTpcIixcclxuXHRcdFx0XHRtb21lbnRMb2NhbC5mb3JtYXQoXCJZWVlZLU1NLUREXCIpXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBUZXN0IGlmIHRoZXkgbWF0Y2ggYSB0YXJnZXQgZGF0ZSBvZiAyMDIwLTAyLTAxIChsb2NhbCBkYXRlKVxyXG5cdFx0XHRjb25zdCB0YXJnZXREYXRlID0gbW9tZW50KG5ldyBEYXRlKFwiMjAyMC0wMi0wMVwiKSkuc3RhcnRPZihcImRheVwiKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJUYXJnZXQgZGF0ZTpcIiwgdGFyZ2V0RGF0ZS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJVVEMgbW9tZW50IG1hdGNoZXM6XCIsIG1vbWVudFVUQy5pc1NhbWUodGFyZ2V0RGF0ZSkpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcIkxvY2FsIG1vbWVudCBtYXRjaGVzOlwiLFxyXG5cdFx0XHRcdG1vbWVudExvY2FsLmlzU2FtZSh0YXJnZXREYXRlKVxyXG5cdFx0XHQpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pO1xyXG4iXX0=