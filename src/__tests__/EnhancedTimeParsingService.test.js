import { TimeParsingService, DEFAULT_TIME_PARSING_CONFIG, } from "../services/time-parsing-service";
describe("Enhanced TimeParsingService", () => {
    let service;
    beforeEach(() => {
        service = new TimeParsingService(DEFAULT_TIME_PARSING_CONFIG);
    });
    describe("TimeComponent Interface", () => {
        test("should create TimeComponent from 24-hour format (12:00)", () => {
            var _a, _b, _c, _d;
            const result = service.parseTimeExpressions("Meeting at 12:00");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.scheduledTime).toBeDefined();
            expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(12);
            expect((_b = result.timeComponents.scheduledTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(0);
            expect((_c = result.timeComponents.scheduledTime) === null || _c === void 0 ? void 0 : _c.originalText).toBe("12:00");
            expect((_d = result.timeComponents.scheduledTime) === null || _d === void 0 ? void 0 : _d.isRange).toBe(false);
        });
        test("should create TimeComponent from 24-hour format with seconds (12:00:00)", () => {
            var _a, _b, _c, _d;
            const result = service.parseTimeExpressions("Task at 12:00:00");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.scheduledTime).toBeDefined();
            expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(12);
            expect((_b = result.timeComponents.scheduledTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(0);
            expect((_c = result.timeComponents.scheduledTime) === null || _c === void 0 ? void 0 : _c.second).toBe(0);
            expect((_d = result.timeComponents.scheduledTime) === null || _d === void 0 ? void 0 : _d.originalText).toBe("12:00:00");
        });
        test("should create TimeComponent from 12-hour format (1:30 PM)", () => {
            var _a, _b, _c;
            const result = service.parseTimeExpressions("Meeting at 1:30 PM");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.scheduledTime).toBeDefined();
            expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(13);
            expect((_b = result.timeComponents.scheduledTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(30);
            expect((_c = result.timeComponents.scheduledTime) === null || _c === void 0 ? void 0 : _c.originalText).toBe("1:30 PM");
        });
        test("should handle time range with hyphen separator (12:00-13:00)", () => {
            var _a, _b, _c, _d, _e, _f;
            const result = service.parseTimeExpressions("Meeting 12:00-13:00");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.startTime).toBeDefined();
            expect(result.timeComponents.endTime).toBeDefined();
            expect((_a = result.timeComponents.startTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(12);
            expect((_b = result.timeComponents.startTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(0);
            expect((_c = result.timeComponents.startTime) === null || _c === void 0 ? void 0 : _c.isRange).toBe(true);
            expect((_d = result.timeComponents.endTime) === null || _d === void 0 ? void 0 : _d.hour).toBe(13);
            expect((_e = result.timeComponents.endTime) === null || _e === void 0 ? void 0 : _e.minute).toBe(0);
            expect((_f = result.timeComponents.endTime) === null || _f === void 0 ? void 0 : _f.isRange).toBe(true);
        });
        test("should handle time range with tilde separator (12:00~13:00)", () => {
            var _a, _b;
            const result = service.parseTimeExpressions("Meeting 12:00~13:00");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.startTime).toBeDefined();
            expect(result.timeComponents.endTime).toBeDefined();
            expect((_a = result.timeComponents.startTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(12);
            expect((_b = result.timeComponents.endTime) === null || _b === void 0 ? void 0 : _b.hour).toBe(13);
        });
        test("should handle time range with space separator (12:00 - 13:00)", () => {
            var _a, _b;
            const result = service.parseTimeExpressions("Meeting 12:00 - 13:00");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.startTime).toBeDefined();
            expect(result.timeComponents.endTime).toBeDefined();
            expect((_a = result.timeComponents.startTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(12);
            expect((_b = result.timeComponents.endTime) === null || _b === void 0 ? void 0 : _b.hour).toBe(13);
        });
    });
    describe("Enhanced ParsedTimeResult", () => {
        test("should include parsedExpressions with time components", () => {
            var _a, _b;
            const result = service.parseTimeExpressions("Task at 14:30 tomorrow");
            expect(result.parsedExpressions).toBeDefined();
            expect(result.parsedExpressions.length).toBeGreaterThan(0);
            const expression = result.parsedExpressions[0];
            expect(expression.timeComponent).toBeDefined();
            expect((_a = expression.timeComponent) === null || _a === void 0 ? void 0 : _a.hour).toBe(14);
            expect((_b = expression.timeComponent) === null || _b === void 0 ? void 0 : _b.minute).toBe(30);
            expect(expression.isTimeRange).toBe(false);
        });
        test("should handle time ranges in parsedExpressions", () => {
            var _a, _b;
            const result = service.parseTimeExpressions("Meeting 14:00-16:00 tomorrow");
            expect(result.parsedExpressions).toBeDefined();
            const expression = result.parsedExpressions[0];
            expect(expression.isTimeRange).toBe(true);
            expect(expression.rangeStart).toBeDefined();
            expect(expression.rangeEnd).toBeDefined();
            expect((_a = expression.rangeStart) === null || _a === void 0 ? void 0 : _a.hour).toBe(14);
            expect((_b = expression.rangeEnd) === null || _b === void 0 ? void 0 : _b.hour).toBe(16);
        });
    });
    describe("Time Pattern Recognition", () => {
        test("should recognize various 24-hour formats", () => {
            const testCases = [
                { input: "09:00", expected: { hour: 9, minute: 0 } },
                { input: "13:30", expected: { hour: 13, minute: 30 } },
                { input: "23:59", expected: { hour: 23, minute: 59 } },
                { input: "00:00", expected: { hour: 0, minute: 0 } },
            ];
            testCases.forEach(({ input, expected }) => {
                var _a, _b;
                const result = service.parseTimeExpressions(`Task at ${input}`);
                expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(expected.hour);
                expect((_b = result.timeComponents.scheduledTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(expected.minute);
            });
        });
        test("should recognize various 12-hour formats", () => {
            const testCases = [
                { input: "9:00 AM", expected: { hour: 9, minute: 0 } },
                { input: "1:30 PM", expected: { hour: 13, minute: 30 } },
                { input: "11:59 PM", expected: { hour: 23, minute: 59 } },
                { input: "12:00 AM", expected: { hour: 0, minute: 0 } },
                { input: "12:00 PM", expected: { hour: 12, minute: 0 } },
            ];
            testCases.forEach(({ input, expected }) => {
                var _a, _b;
                const result = service.parseTimeExpressions(`Task at ${input}`);
                expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(expected.hour);
                expect((_b = result.timeComponents.scheduledTime) === null || _b === void 0 ? void 0 : _b.minute).toBe(expected.minute);
            });
        });
        test("should handle midnight crossing ranges (23:00-01:00)", () => {
            var _a, _b;
            const result = service.parseTimeExpressions("Night shift 23:00-01:00");
            expect((_a = result.timeComponents.startTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(23);
            expect((_b = result.timeComponents.endTime) === null || _b === void 0 ? void 0 : _b.hour).toBe(1);
            // Should indicate next day for end time
            expect(result.parsedExpressions[0]).toHaveProperty("crossesMidnight", true);
        });
    });
    describe("Time Validation", () => {
        test("should validate hour range (0-23)", () => {
            const result = service.parseTimeExpressions("Task at 25:00");
            // Invalid time should not be parsed
            expect(result.timeComponents.scheduledTime).toBeUndefined();
        });
        test("should validate minute range (0-59)", () => {
            const result = service.parseTimeExpressions("Task at 12:60");
            // Invalid time should not be parsed
            expect(result.timeComponents.scheduledTime).toBeUndefined();
        });
        test("should validate second range (0-59)", () => {
            const result = service.parseTimeExpressions("Task at 12:30:60");
            // Invalid time (60 seconds) should not be parsed as time component
            // But the regular date parsing might still work for the text
            expect(result.timeComponents).toBeDefined();
            // Time component should not be created for invalid time
            if (result.timeComponents.scheduledTime) {
                // If something was parsed, it shouldn't have 60 seconds
                expect(result.timeComponents.scheduledTime.second).not.toBe(60);
            }
        });
    });
    describe("Error Handling", () => {
        test("should gracefully handle invalid time formats", () => {
            const result = service.parseTimeExpressions("Task at invalid:time");
            expect(result.timeComponents).toBeDefined();
            expect(result.timeComponents.scheduledTime).toBeUndefined();
            expect(result.originalText).toBe("Task at invalid:time");
        });
        test("should fall back to date-only parsing when time parsing fails", () => {
            const result = service.parseTimeExpressions("Task tomorrow at badtime");
            // Should still parse the date part (context "at" makes it scheduled, not due)
            expect(result.scheduledDate).toBeDefined();
            expect(result.timeComponents.scheduledTime).toBeUndefined();
        });
    });
    describe("Configuration", () => {
        test("should respect time parsing configuration", () => {
            var _a;
            const config = Object.assign(Object.assign({}, DEFAULT_TIME_PARSING_CONFIG), { timePatterns: {
                    singleTime: [/\d{1,2}:\d{2}/],
                    timeRange: [/\d{1,2}:\d{2}-\d{1,2}:\d{2}/],
                    rangeSeparators: ["-", "~", " - "],
                }, timeDefaults: {
                    preferredFormat: "24h",
                    defaultPeriod: "PM",
                    midnightCrossing: "next-day",
                } });
            const enhancedService = new TimeParsingService(config);
            const result = enhancedService.parseTimeExpressions("Task at 3:00");
            // 24-hour format times should be parsed as-is
            // 3:00 in 24h format means 3:00 AM
            expect((_a = result.timeComponents.scheduledTime) === null || _a === void 0 ? void 0 : _a.hour).toBe(3);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5oYW5jZWRUaW1lUGFyc2luZ1NlcnZpY2UudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkVuaGFuY2VkVGltZVBhcnNpbmdTZXJ2aWNlLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNOLGtCQUFrQixFQUNsQiwyQkFBMkIsR0FDM0IsTUFBTSxrQ0FBa0MsQ0FBQztBQVExQyxRQUFRLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO0lBQzVDLElBQUksT0FBMkIsQ0FBQztJQUVoQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2YsT0FBTyxHQUFHLElBQUksa0JBQWtCLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUMvRCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsSUFBSSxDQUFDLHlEQUF5RCxFQUFFLEdBQUcsRUFBRTs7WUFDcEUsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUMxQyxrQkFBa0IsQ0FDVSxDQUFDO1lBRTlCLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDMUQsTUFBTSxDQUFDLE1BQUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLDBDQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMzRCxNQUFNLENBQUMsTUFBQSxNQUFNLENBQUMsY0FBYyxDQUFDLGFBQWEsMENBQUUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVELE1BQU0sQ0FBQyxNQUFBLE1BQU0sQ0FBQyxjQUFjLENBQUMsYUFBYSwwQ0FBRSxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEUs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b0JBQ2IsVUFBVSxFQUFFLENBQUMsZUFBZSxDQUFDO29CQUM3QixTQUFTLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQztvQkFDMUMsZUFBZSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUM7aUJBQ2xDLEVBQ0QsWUFBWSxFQUFFO29CQUNiLGVBQWUsRUFBRSxLQUFLO29CQUN0QixhQUFhLEVBQUUsSUFBSTtvQkFDbkIsZ0JBQWdCLEVBQUUsVUFBVTtpQkFDNUIsR0FDRCxDQUFDO1lBRUYsTUFBTSxlQUFlLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN2RCxNQUFNLE1BQU0sR0FBRyxlQUFlLENBQUMsb0JBQW9CLENBQ2xELGNBQWMsQ0FDYyxDQUFDO1lBRTlCLDhDQUE4QztZQUM5QyxtQ0FBbUM7WUFDbkMsTUFBTSxDQUFDLE1BQUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxhQUFhLDBDQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG5cdFRpbWVQYXJzaW5nU2VydmljZSxcclxuXHRERUZBVUxUX1RJTUVfUEFSU0lOR19DT05GSUcsXHJcbn0gZnJvbSBcIi4uL3NlcnZpY2VzL3RpbWUtcGFyc2luZy1zZXJ2aWNlXCI7XHJcbmltcG9ydCB0eXBlIHtcclxuXHRUaW1lQ29tcG9uZW50LFxyXG5cdEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdCxcclxuXHRFbmhhbmNlZFRpbWVFeHByZXNzaW9uLFxyXG5cdEVuaGFuY2VkVGltZVBhcnNpbmdDb25maWcsXHJcbn0gZnJvbSBcIi4uL3R5cGVzL3RpbWUtcGFyc2luZ1wiO1xyXG5cclxuZGVzY3JpYmUoXCJFbmhhbmNlZCBUaW1lUGFyc2luZ1NlcnZpY2VcIiwgKCkgPT4ge1xyXG5cdGxldCBzZXJ2aWNlOiBUaW1lUGFyc2luZ1NlcnZpY2U7XHJcblxyXG5cdGJlZm9yZUVhY2goKCkgPT4ge1xyXG5cdFx0c2VydmljZSA9IG5ldyBUaW1lUGFyc2luZ1NlcnZpY2UoREVGQVVMVF9USU1FX1BBUlNJTkdfQ09ORklHKTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJUaW1lQ29tcG9uZW50IEludGVyZmFjZVwiLCAoKSA9PiB7XHJcblx0XHR0ZXN0KFwic2hvdWxkIGNyZWF0ZSBUaW1lQ29tcG9uZW50IGZyb20gMjQtaG91ciBmb3JtYXQgKDEyOjAwKVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJNZWV0aW5nIGF0IDEyOjAwXCJcclxuXHRcdFx0KSBhcyBFbmhhbmNlZFBhcnNlZFRpbWVSZXN1bHQ7XHJcblxyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZT8uaG91cikudG9CZSgxMik7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZT8ubWludXRlKS50b0JlKDApO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/Lm9yaWdpbmFsVGV4dCkudG9CZShcIjEyOjAwXCIpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/LmlzUmFuZ2UpLnRvQmUoZmFsc2UpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCBjcmVhdGUgVGltZUNvbXBvbmVudCBmcm9tIDI0LWhvdXIgZm9ybWF0IHdpdGggc2Vjb25kcyAoMTI6MDA6MDApXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VydmljZS5wYXJzZVRpbWVFeHByZXNzaW9ucyhcclxuXHRcdFx0XHRcIlRhc2sgYXQgMTI6MDA6MDBcIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZSkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5ob3VyKS50b0JlKDEyKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5taW51dGUpLnRvQmUoMCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZT8uc2Vjb25kKS50b0JlKDApO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/Lm9yaWdpbmFsVGV4dCkudG9CZShcIjEyOjAwOjAwXCIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCBjcmVhdGUgVGltZUNvbXBvbmVudCBmcm9tIDEyLWhvdXIgZm9ybWF0ICgxOjMwIFBNKVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJNZWV0aW5nIGF0IDE6MzAgUE1cIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZSkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5ob3VyKS50b0JlKDEzKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5taW51dGUpLnRvQmUoMzApO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/Lm9yaWdpbmFsVGV4dCkudG9CZShcIjE6MzAgUE1cIik7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIGhhbmRsZSB0aW1lIHJhbmdlIHdpdGggaHlwaGVuIHNlcGFyYXRvciAoMTI6MDAtMTM6MDApXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VydmljZS5wYXJzZVRpbWVFeHByZXNzaW9ucyhcclxuXHRcdFx0XHRcIk1lZXRpbmcgMTI6MDAtMTM6MDBcIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc3RhcnRUaW1lKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLmVuZFRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc3RhcnRUaW1lPy5ob3VyKS50b0JlKDEyKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zdGFydFRpbWU/Lm1pbnV0ZSkudG9CZSgwKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zdGFydFRpbWU/LmlzUmFuZ2UpLnRvQmUodHJ1ZSk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuZW5kVGltZT8uaG91cikudG9CZSgxMyk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuZW5kVGltZT8ubWludXRlKS50b0JlKDApO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLmVuZFRpbWU/LmlzUmFuZ2UpLnRvQmUodHJ1ZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIGhhbmRsZSB0aW1lIHJhbmdlIHdpdGggdGlsZGUgc2VwYXJhdG9yICgxMjowMH4xMzowMClcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBzZXJ2aWNlLnBhcnNlVGltZUV4cHJlc3Npb25zKFxyXG5cdFx0XHRcdFwiTWVldGluZyAxMjowMH4xMzowMFwiXHJcblx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cykudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zdGFydFRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuZW5kVGltZSkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zdGFydFRpbWU/LmhvdXIpLnRvQmUoMTIpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLmVuZFRpbWU/LmhvdXIpLnRvQmUoMTMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCBoYW5kbGUgdGltZSByYW5nZSB3aXRoIHNwYWNlIHNlcGFyYXRvciAoMTI6MDAgLSAxMzowMClcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBzZXJ2aWNlLnBhcnNlVGltZUV4cHJlc3Npb25zKFxyXG5cdFx0XHRcdFwiTWVldGluZyAxMjowMCAtIDEzOjAwXCJcclxuXHRcdFx0KSBhcyBFbmhhbmNlZFBhcnNlZFRpbWVSZXN1bHQ7XHJcblxyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnN0YXJ0VGltZSkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5lbmRUaW1lKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnN0YXJ0VGltZT8uaG91cikudG9CZSgxMik7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuZW5kVGltZT8uaG91cikudG9CZSgxMyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJFbmhhbmNlZCBQYXJzZWRUaW1lUmVzdWx0XCIsICgpID0+IHtcclxuXHRcdHRlc3QoXCJzaG91bGQgaW5jbHVkZSBwYXJzZWRFeHByZXNzaW9ucyB3aXRoIHRpbWUgY29tcG9uZW50c1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJUYXNrIGF0IDE0OjMwIHRvbW9ycm93XCJcclxuXHRcdFx0KSBhcyBFbmhhbmNlZFBhcnNlZFRpbWVSZXN1bHQ7XHJcblxyXG5cdFx0XHRleHBlY3QocmVzdWx0LnBhcnNlZEV4cHJlc3Npb25zKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnBhcnNlZEV4cHJlc3Npb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgZXhwcmVzc2lvbiA9IHJlc3VsdC5wYXJzZWRFeHByZXNzaW9uc1swXSBhcyBFbmhhbmNlZFRpbWVFeHByZXNzaW9uO1xyXG5cdFx0XHRleHBlY3QoZXhwcmVzc2lvbi50aW1lQ29tcG9uZW50KS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QoZXhwcmVzc2lvbi50aW1lQ29tcG9uZW50Py5ob3VyKS50b0JlKDE0KTtcclxuXHRcdFx0ZXhwZWN0KGV4cHJlc3Npb24udGltZUNvbXBvbmVudD8ubWludXRlKS50b0JlKDMwKTtcclxuXHRcdFx0ZXhwZWN0KGV4cHJlc3Npb24uaXNUaW1lUmFuZ2UpLnRvQmUoZmFsc2UpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCBoYW5kbGUgdGltZSByYW5nZXMgaW4gcGFyc2VkRXhwcmVzc2lvbnNcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBzZXJ2aWNlLnBhcnNlVGltZUV4cHJlc3Npb25zKFxyXG5cdFx0XHRcdFwiTWVldGluZyAxNDowMC0xNjowMCB0b21vcnJvd1wiXHJcblx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC5wYXJzZWRFeHByZXNzaW9ucykudG9CZURlZmluZWQoKTtcclxuXHRcdFx0Y29uc3QgZXhwcmVzc2lvbiA9IHJlc3VsdC5wYXJzZWRFeHByZXNzaW9uc1swXSBhcyBFbmhhbmNlZFRpbWVFeHByZXNzaW9uO1xyXG5cdFx0XHRleHBlY3QoZXhwcmVzc2lvbi5pc1RpbWVSYW5nZSkudG9CZSh0cnVlKTtcclxuXHRcdFx0ZXhwZWN0KGV4cHJlc3Npb24ucmFuZ2VTdGFydCkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KGV4cHJlc3Npb24ucmFuZ2VFbmQpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChleHByZXNzaW9uLnJhbmdlU3RhcnQ/LmhvdXIpLnRvQmUoMTQpO1xyXG5cdFx0XHRleHBlY3QoZXhwcmVzc2lvbi5yYW5nZUVuZD8uaG91cikudG9CZSgxNik7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJUaW1lIFBhdHRlcm4gUmVjb2duaXRpb25cIiwgKCkgPT4ge1xyXG5cdFx0dGVzdChcInNob3VsZCByZWNvZ25pemUgdmFyaW91cyAyNC1ob3VyIGZvcm1hdHNcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB0ZXN0Q2FzZXMgPSBbXHJcblx0XHRcdFx0eyBpbnB1dDogXCIwOTowMFwiLCBleHBlY3RlZDogeyBob3VyOiA5LCBtaW51dGU6IDAgfSB9LFxyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiMTM6MzBcIiwgZXhwZWN0ZWQ6IHsgaG91cjogMTMsIG1pbnV0ZTogMzAgfSB9LFxyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiMjM6NTlcIiwgZXhwZWN0ZWQ6IHsgaG91cjogMjMsIG1pbnV0ZTogNTkgfSB9LFxyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiMDA6MDBcIiwgZXhwZWN0ZWQ6IHsgaG91cjogMCwgbWludXRlOiAwIH0gfSxcclxuXHRcdFx0XTtcclxuXHJcblx0XHRcdHRlc3RDYXNlcy5mb3JFYWNoKCh7IGlucHV0LCBleHBlY3RlZCB9KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VydmljZS5wYXJzZVRpbWVFeHByZXNzaW9ucyhcclxuXHRcdFx0XHRcdGBUYXNrIGF0ICR7aW5wdXR9YFxyXG5cdFx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cdFx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZT8uaG91cikudG9CZShleHBlY3RlZC5ob3VyKTtcclxuXHRcdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/Lm1pbnV0ZSkudG9CZShleHBlY3RlZC5taW51dGUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRlc3QoXCJzaG91bGQgcmVjb2duaXplIHZhcmlvdXMgMTItaG91ciBmb3JtYXRzXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgdGVzdENhc2VzID0gW1xyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiOTowMCBBTVwiLCBleHBlY3RlZDogeyBob3VyOiA5LCBtaW51dGU6IDAgfSB9LFxyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiMTozMCBQTVwiLCBleHBlY3RlZDogeyBob3VyOiAxMywgbWludXRlOiAzMCB9IH0sXHJcblx0XHRcdFx0eyBpbnB1dDogXCIxMTo1OSBQTVwiLCBleHBlY3RlZDogeyBob3VyOiAyMywgbWludXRlOiA1OSB9IH0sXHJcblx0XHRcdFx0eyBpbnB1dDogXCIxMjowMCBBTVwiLCBleHBlY3RlZDogeyBob3VyOiAwLCBtaW51dGU6IDAgfSB9LFxyXG5cdFx0XHRcdHsgaW5wdXQ6IFwiMTI6MDAgUE1cIiwgZXhwZWN0ZWQ6IHsgaG91cjogMTIsIG1pbnV0ZTogMCB9IH0sXHJcblx0XHRcdF07XHJcblxyXG5cdFx0XHR0ZXN0Q2FzZXMuZm9yRWFjaCgoeyBpbnB1dCwgZXhwZWN0ZWQgfSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XHRgVGFzayBhdCAke2lucHV0fWBcclxuXHRcdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHRcdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWU/LmhvdXIpLnRvQmUoZXhwZWN0ZWQuaG91cik7XHJcblx0XHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5taW51dGUpLnRvQmUoZXhwZWN0ZWQubWludXRlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIGhhbmRsZSBtaWRuaWdodCBjcm9zc2luZyByYW5nZXMgKDIzOjAwLTAxOjAwKVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJOaWdodCBzaGlmdCAyMzowMC0wMTowMFwiXHJcblx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zdGFydFRpbWU/LmhvdXIpLnRvQmUoMjMpO1xyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzLmVuZFRpbWU/LmhvdXIpLnRvQmUoMSk7XHJcblx0XHRcdC8vIFNob3VsZCBpbmRpY2F0ZSBuZXh0IGRheSBmb3IgZW5kIHRpbWVcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC5wYXJzZWRFeHByZXNzaW9uc1swXSkudG9IYXZlUHJvcGVydHkoXCJjcm9zc2VzTWlkbmlnaHRcIiwgdHJ1ZSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJUaW1lIFZhbGlkYXRpb25cIiwgKCkgPT4ge1xyXG5cdFx0dGVzdChcInNob3VsZCB2YWxpZGF0ZSBob3VyIHJhbmdlICgwLTIzKVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJUYXNrIGF0IDI1OjAwXCJcclxuXHRcdFx0KSBhcyBFbmhhbmNlZFBhcnNlZFRpbWVSZXN1bHQ7XHJcblxyXG5cdFx0XHQvLyBJbnZhbGlkIHRpbWUgc2hvdWxkIG5vdCBiZSBwYXJzZWRcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lKS50b0JlVW5kZWZpbmVkKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIHZhbGlkYXRlIG1pbnV0ZSByYW5nZSAoMC01OSlcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBzZXJ2aWNlLnBhcnNlVGltZUV4cHJlc3Npb25zKFxyXG5cdFx0XHRcdFwiVGFzayBhdCAxMjo2MFwiXHJcblx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cclxuXHRcdFx0Ly8gSW52YWxpZCB0aW1lIHNob3VsZCBub3QgYmUgcGFyc2VkXHJcblx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZSkudG9CZVVuZGVmaW5lZCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGVzdChcInNob3VsZCB2YWxpZGF0ZSBzZWNvbmQgcmFuZ2UgKDAtNTkpXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gc2VydmljZS5wYXJzZVRpbWVFeHByZXNzaW9ucyhcclxuXHRcdFx0XHRcIlRhc2sgYXQgMTI6MzA6NjBcIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdC8vIEludmFsaWQgdGltZSAoNjAgc2Vjb25kcykgc2hvdWxkIG5vdCBiZSBwYXJzZWQgYXMgdGltZSBjb21wb25lbnRcclxuXHRcdFx0Ly8gQnV0IHRoZSByZWd1bGFyIGRhdGUgcGFyc2luZyBtaWdodCBzdGlsbCB3b3JrIGZvciB0aGUgdGV4dFxyXG5cdFx0XHRleHBlY3QocmVzdWx0LnRpbWVDb21wb25lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHQvLyBUaW1lIGNvbXBvbmVudCBzaG91bGQgbm90IGJlIGNyZWF0ZWQgZm9yIGludmFsaWQgdGltZVxyXG5cdFx0XHRpZiAocmVzdWx0LnRpbWVDb21wb25lbnRzLnNjaGVkdWxlZFRpbWUpIHtcclxuXHRcdFx0XHQvLyBJZiBzb21ldGhpbmcgd2FzIHBhcnNlZCwgaXQgc2hvdWxkbid0IGhhdmUgNjAgc2Vjb25kc1xyXG5cdFx0XHRcdGV4cGVjdChyZXN1bHQudGltZUNvbXBvbmVudHMuc2NoZWR1bGVkVGltZS5zZWNvbmQpLm5vdC50b0JlKDYwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdGRlc2NyaWJlKFwiRXJyb3IgSGFuZGxpbmdcIiwgKCkgPT4ge1xyXG5cdFx0dGVzdChcInNob3VsZCBncmFjZWZ1bGx5IGhhbmRsZSBpbnZhbGlkIHRpbWUgZm9ybWF0c1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJUYXNrIGF0IGludmFsaWQ6dGltZVwiXHJcblx0XHRcdCkgYXMgRW5oYW5jZWRQYXJzZWRUaW1lUmVzdWx0O1xyXG5cclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cykudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lKS50b0JlVW5kZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdChyZXN1bHQub3JpZ2luYWxUZXh0KS50b0JlKFwiVGFzayBhdCBpbnZhbGlkOnRpbWVcIik7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0ZXN0KFwic2hvdWxkIGZhbGwgYmFjayB0byBkYXRlLW9ubHkgcGFyc2luZyB3aGVuIHRpbWUgcGFyc2luZyBmYWlsc1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJUYXNrIHRvbW9ycm93IGF0IGJhZHRpbWVcIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdC8vIFNob3VsZCBzdGlsbCBwYXJzZSB0aGUgZGF0ZSBwYXJ0IChjb250ZXh0IFwiYXRcIiBtYWtlcyBpdCBzY2hlZHVsZWQsIG5vdCBkdWUpXHJcblx0XHRcdGV4cGVjdChyZXN1bHQuc2NoZWR1bGVkRGF0ZSkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lKS50b0JlVW5kZWZpbmVkKCk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJDb25maWd1cmF0aW9uXCIsICgpID0+IHtcclxuXHRcdHRlc3QoXCJzaG91bGQgcmVzcGVjdCB0aW1lIHBhcnNpbmcgY29uZmlndXJhdGlvblwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IGNvbmZpZzogRW5oYW5jZWRUaW1lUGFyc2luZ0NvbmZpZyA9IHtcclxuXHRcdFx0XHQuLi5ERUZBVUxUX1RJTUVfUEFSU0lOR19DT05GSUcsXHJcblx0XHRcdFx0dGltZVBhdHRlcm5zOiB7XHJcblx0XHRcdFx0XHRzaW5nbGVUaW1lOiBbL1xcZHsxLDJ9OlxcZHsyfS9dLFxyXG5cdFx0XHRcdFx0dGltZVJhbmdlOiBbL1xcZHsxLDJ9OlxcZHsyfS1cXGR7MSwyfTpcXGR7Mn0vXSxcclxuXHRcdFx0XHRcdHJhbmdlU2VwYXJhdG9yczogW1wiLVwiLCBcIn5cIiwgXCIgLSBcIl0sXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR0aW1lRGVmYXVsdHM6IHtcclxuXHRcdFx0XHRcdHByZWZlcnJlZEZvcm1hdDogXCIyNGhcIixcclxuXHRcdFx0XHRcdGRlZmF1bHRQZXJpb2Q6IFwiUE1cIixcclxuXHRcdFx0XHRcdG1pZG5pZ2h0Q3Jvc3Npbmc6IFwibmV4dC1kYXlcIixcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29uc3QgZW5oYW5jZWRTZXJ2aWNlID0gbmV3IFRpbWVQYXJzaW5nU2VydmljZShjb25maWcpO1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBlbmhhbmNlZFNlcnZpY2UucGFyc2VUaW1lRXhwcmVzc2lvbnMoXHJcblx0XHRcdFx0XCJUYXNrIGF0IDM6MDBcIlxyXG5cdFx0XHQpIGFzIEVuaGFuY2VkUGFyc2VkVGltZVJlc3VsdDtcclxuXHJcblx0XHRcdC8vIDI0LWhvdXIgZm9ybWF0IHRpbWVzIHNob3VsZCBiZSBwYXJzZWQgYXMtaXNcclxuXHRcdFx0Ly8gMzowMCBpbiAyNGggZm9ybWF0IG1lYW5zIDM6MDAgQU1cclxuXHRcdFx0ZXhwZWN0KHJlc3VsdC50aW1lQ29tcG9uZW50cy5zY2hlZHVsZWRUaW1lPy5ob3VyKS50b0JlKDMpO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pOyJdfQ==