/**
 * Integration tests for inline task parsing with enhanced time parsing
 */
import { ConfigurableTaskParser } from "../dataflow/core/ConfigurableTaskParser";
import { TimeParsingService } from "../services/time-parsing-service";
import { MetadataParseMode } from "../types/TaskParserConfig";
describe("Inline Task Time Integration", () => {
    let timeParsingService;
    let taskParser;
    beforeEach(() => {
        // Create time parsing service with test configuration
        const timeConfig = {
            enabled: true,
            supportedLanguages: ["en"],
            dateKeywords: {
                start: ["start", "from", "begins"],
                due: ["due", "deadline", "by"],
                scheduled: ["scheduled", "at", "@"],
            },
            removeOriginalText: false,
            perLineProcessing: true,
            realTimeReplacement: false,
        };
        timeParsingService = new TimeParsingService(timeConfig);
        // Create task parser with time parsing service
        const parserConfig = {
            parseMetadata: true,
            parseTags: true,
            parseComments: false,
            parseHeadings: false,
            metadataParseMode: MetadataParseMode.Both,
        };
        taskParser = new ConfigurableTaskParser(parserConfig, timeParsingService);
    });
    describe("Single Time Extraction", () => {
        it("should extract single time from inline task", () => {
            var _a, _b;
            const markdown = "- [ ] Meeting at 2:30 PM";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Meeting at 2:30 PM");
            expect(task.metadata.timeComponents).toBeDefined();
            // Check time component (could be dueTime or scheduledTime based on context)
            const timeComponent = ((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.dueTime) || ((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.scheduledTime);
            expect(timeComponent).toBeDefined();
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.hour).toBe(14);
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.minute).toBe(30);
        });
        it("should extract 24-hour format time", () => {
            var _a, _b;
            const markdown = "- [ ] Call client at 15:45";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Call client at 15:45");
            expect(task.metadata.timeComponents).toBeDefined();
            const timeComponent = ((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.dueTime) || ((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.scheduledTime);
            expect(timeComponent).toBeDefined();
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.hour).toBe(15);
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.minute).toBe(45);
        });
    });
    describe("Time Range Extraction", () => {
        it("should extract time range from inline task", () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            const markdown = "- [ ] Workshop 9:00-17:00";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Workshop 9:00-17:00");
            expect(task.metadata.timeComponents).toBeDefined();
            expect((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.startTime).toBeDefined();
            expect((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.endTime).toBeDefined();
            expect((_d = (_c = task.metadata.timeComponents) === null || _c === void 0 ? void 0 : _c.startTime) === null || _d === void 0 ? void 0 : _d.hour).toBe(9);
            expect((_f = (_e = task.metadata.timeComponents) === null || _e === void 0 ? void 0 : _e.startTime) === null || _f === void 0 ? void 0 : _f.minute).toBe(0);
            expect((_h = (_g = task.metadata.timeComponents) === null || _g === void 0 ? void 0 : _g.endTime) === null || _h === void 0 ? void 0 : _h.hour).toBe(17);
            expect((_k = (_j = task.metadata.timeComponents) === null || _j === void 0 ? void 0 : _j.endTime) === null || _k === void 0 ? void 0 : _k.minute).toBe(0);
        });
        it("should extract 12-hour format time range", () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            const markdown = "- [ ] Meeting 2:30 PM - 4:00 PM";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Meeting 2:30 PM - 4:00 PM");
            expect(task.metadata.timeComponents).toBeDefined();
            expect((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.startTime).toBeDefined();
            expect((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.endTime).toBeDefined();
            expect((_d = (_c = task.metadata.timeComponents) === null || _c === void 0 ? void 0 : _c.startTime) === null || _d === void 0 ? void 0 : _d.hour).toBe(14);
            expect((_f = (_e = task.metadata.timeComponents) === null || _e === void 0 ? void 0 : _e.startTime) === null || _f === void 0 ? void 0 : _f.minute).toBe(30);
            expect((_h = (_g = task.metadata.timeComponents) === null || _g === void 0 ? void 0 : _g.endTime) === null || _h === void 0 ? void 0 : _h.hour).toBe(16);
            expect((_k = (_j = task.metadata.timeComponents) === null || _j === void 0 ? void 0 : _j.endTime) === null || _k === void 0 ? void 0 : _k.minute).toBe(0);
        });
    });
    describe("Time with Metadata Integration", () => {
        it("should combine time components with dataview metadata", () => {
            var _a, _b, _c, _d;
            const markdown = "- [ ] Doctor appointment at 3:30 PM [due::2025-08-25]";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Doctor appointment at 3:30 PM");
            expect(task.metadata.timeComponents).toBeDefined();
            // Check time component
            const timeComponent = ((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.dueTime) || ((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.scheduledTime);
            expect(timeComponent).toBeDefined();
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.hour).toBe(15);
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.minute).toBe(30);
            // Check that enhanced datetime was created
            expect((_c = task.metadata.enhancedDates) === null || _c === void 0 ? void 0 : _c.dueDateTime).toBeDefined();
            const dueDateTime = (_d = task.metadata.enhancedDates) === null || _d === void 0 ? void 0 : _d.dueDateTime;
            if (dueDateTime) {
                expect(dueDateTime.getFullYear()).toBe(2025);
                expect(dueDateTime.getMonth()).toBe(7); // August (0-based)
                expect(dueDateTime.getDate()).toBe(25);
                expect(dueDateTime.getHours()).toBe(15);
                expect(dueDateTime.getMinutes()).toBe(30);
            }
        });
        it("should handle emoji metadata with time components", () => {
            var _a, _b, _c;
            const markdown = "- [ ] Project deadline at 5:00 PM ðŸ“… 2025-08-25";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Project deadline at 5:00 PM");
            expect(task.metadata.timeComponents).toBeDefined();
            const timeComponent = ((_a = task.metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.dueTime) || ((_b = task.metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.scheduledTime);
            expect(timeComponent).toBeDefined();
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.hour).toBe(17);
            expect(timeComponent === null || timeComponent === void 0 ? void 0 : timeComponent.minute).toBe(0);
            // Check enhanced datetime
            expect((_c = task.metadata.enhancedDates) === null || _c === void 0 ? void 0 : _c.dueDateTime).toBeDefined();
        });
    });
    describe("Multiple Tasks", () => {
        it("should extract time components from multiple tasks", () => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const markdown = `- [ ] Morning meeting at 9:00 AM
- [ ] Lunch break 12:00-13:00
- [ ] Afternoon call at 3:30 PM`;
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(3);
            // First task
            expect(tasks[0].content).toBe("Morning meeting at 9:00 AM");
            const time1 = ((_a = tasks[0].metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.dueTime) || ((_b = tasks[0].metadata.timeComponents) === null || _b === void 0 ? void 0 : _b.scheduledTime);
            expect(time1 === null || time1 === void 0 ? void 0 : time1.hour).toBe(9);
            expect(time1 === null || time1 === void 0 ? void 0 : time1.minute).toBe(0);
            // Second task (time range)
            expect(tasks[1].content).toBe("Lunch break 12:00-13:00");
            expect((_d = (_c = tasks[1].metadata.timeComponents) === null || _c === void 0 ? void 0 : _c.startTime) === null || _d === void 0 ? void 0 : _d.hour).toBe(12);
            expect((_f = (_e = tasks[1].metadata.timeComponents) === null || _e === void 0 ? void 0 : _e.endTime) === null || _f === void 0 ? void 0 : _f.hour).toBe(13);
            // Third task
            expect(tasks[2].content).toBe("Afternoon call at 3:30 PM");
            const time3 = ((_g = tasks[2].metadata.timeComponents) === null || _g === void 0 ? void 0 : _g.dueTime) || ((_h = tasks[2].metadata.timeComponents) === null || _h === void 0 ? void 0 : _h.scheduledTime);
            expect(time3 === null || time3 === void 0 ? void 0 : time3.hour).toBe(15);
            expect(time3 === null || time3 === void 0 ? void 0 : time3.minute).toBe(30);
        });
    });
    describe("Hierarchical Tasks", () => {
        it("should extract time components from nested tasks", () => {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            const markdown = `- [ ] Project meeting 2:00 PM - 4:00 PM
  - [ ] Review agenda at 1:45 PM
  - [ ] Prepare slides at 1:30 PM`;
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(3);
            // Parent task (time range)
            expect(tasks[0].content).toBe("Project meeting 2:00 PM - 4:00 PM");
            expect((_b = (_a = tasks[0].metadata.timeComponents) === null || _a === void 0 ? void 0 : _a.startTime) === null || _b === void 0 ? void 0 : _b.hour).toBe(14);
            expect((_d = (_c = tasks[0].metadata.timeComponents) === null || _c === void 0 ? void 0 : _c.endTime) === null || _d === void 0 ? void 0 : _d.hour).toBe(16);
            // Child tasks
            expect(tasks[1].content).toBe("Review agenda at 1:45 PM");
            const time1 = ((_e = tasks[1].metadata.timeComponents) === null || _e === void 0 ? void 0 : _e.dueTime) || ((_f = tasks[1].metadata.timeComponents) === null || _f === void 0 ? void 0 : _f.scheduledTime);
            expect(time1 === null || time1 === void 0 ? void 0 : time1.hour).toBe(13);
            expect(time1 === null || time1 === void 0 ? void 0 : time1.minute).toBe(45);
            expect(tasks[2].content).toBe("Prepare slides at 1:30 PM");
            const time2 = ((_g = tasks[2].metadata.timeComponents) === null || _g === void 0 ? void 0 : _g.dueTime) || ((_h = tasks[2].metadata.timeComponents) === null || _h === void 0 ? void 0 : _h.scheduledTime);
            expect(time2 === null || time2 === void 0 ? void 0 : time2.hour).toBe(13);
            expect(time2 === null || time2 === void 0 ? void 0 : time2.minute).toBe(30);
        });
    });
    describe("Error Handling", () => {
        it("should handle tasks without time information gracefully", () => {
            const markdown = "- [ ] Simple task without time";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Simple task without time");
            expect(task.metadata.timeComponents).toBeUndefined();
            expect(task.metadata.enhancedDates).toBeUndefined();
        });
        it("should handle invalid time formats gracefully", () => {
            const markdown = "- [ ] Task with invalid time 25:99";
            const tasks = taskParser.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Task with invalid time 25:99");
            // Should not crash, may or may not have time components depending on parsing
        });
        it("should work without time parsing service", () => {
            const parserWithoutTime = new ConfigurableTaskParser();
            const markdown = "- [ ] Meeting at 2:30 PM";
            const tasks = parserWithoutTime.parse(markdown, "test.md");
            expect(tasks).toHaveLength(1);
            const task = tasks[0];
            expect(task.content).toBe("Meeting at 2:30 PM");
            expect(task.metadata.timeComponents).toBeUndefined();
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5saW5lVGFza1RpbWVJbnRlZ3JhdGlvbi50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSW5saW5lVGFza1RpbWVJbnRlZ3JhdGlvbi50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBRUgsT0FBTyxFQUFzQixzQkFBc0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3JHLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRXRFLE9BQU8sRUFBb0IsaUJBQWlCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUdoRixRQUFRLENBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO0lBQzdDLElBQUksa0JBQXNDLENBQUM7SUFDM0MsSUFBSSxVQUE4QixDQUFDO0lBRW5DLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZixzREFBc0Q7UUFDdEQsTUFBTSxVQUFVLEdBQXNCO1lBQ3JDLE9BQU8sRUFBRSxJQUFJO1lBQ2Isa0JBQWtCLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDMUIsWUFBWSxFQUFFO2dCQUNiLEtBQUssRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO2dCQUNsQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQztnQkFDOUIsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxHQUFHLENBQUM7YUFDbkM7WUFDRCxrQkFBa0IsRUFBRSxLQUFLO1lBQ3pCLGlCQUFpQixFQUFFLElBQUk7WUFDdkIsbUJBQW1CLEVBQUUsS0FBSztTQUMxQixDQUFDO1FBRUYsa0JBQWtCLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4RCwrQ0FBK0M7UUFDL0MsTUFBTSxZQUFZLEdBQThCO1lBQy9DLGFBQWEsRUFBRSxJQUFJO1lBQ25CLFNBQVMsRUFBRSxJQUFJO1lBQ2YsYUFBYSxFQUFFLEtBQUs7WUFDcEIsYUFBYSxF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Q0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUUsSUFBSSxDQUFDLFFBQXlDLENBQUMsY0FBYyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDeEYsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEludGVncmF0aW9uIHRlc3RzIGZvciBpbmxpbmUgdGFzayBwYXJzaW5nIHdpdGggZW5oYW5jZWQgdGltZSBwYXJzaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWFya2Rvd25UYXNrUGFyc2VyLCBDb25maWd1cmFibGVUYXNrUGFyc2VyIH0gZnJvbSBcIi4uL2RhdGFmbG93L2NvcmUvQ29uZmlndXJhYmxlVGFza1BhcnNlclwiO1xyXG5pbXBvcnQgeyBUaW1lUGFyc2luZ1NlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvdGltZS1wYXJzaW5nLXNlcnZpY2VcIjtcclxuaW1wb3J0IHsgVGltZVBhcnNpbmdDb25maWcgfSBmcm9tIFwiLi4vc2VydmljZXMvdGltZS1wYXJzaW5nLXNlcnZpY2VcIjtcclxuaW1wb3J0IHsgVGFza1BhcnNlckNvbmZpZywgTWV0YWRhdGFQYXJzZU1vZGUgfSBmcm9tIFwiLi4vdHlwZXMvVGFza1BhcnNlckNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhIH0gZnJvbSBcIi4uL3R5cGVzL3RpbWUtcGFyc2luZ1wiO1xyXG5cclxuZGVzY3JpYmUoXCJJbmxpbmUgVGFzayBUaW1lIEludGVncmF0aW9uXCIsICgpID0+IHtcclxuXHRsZXQgdGltZVBhcnNpbmdTZXJ2aWNlOiBUaW1lUGFyc2luZ1NlcnZpY2U7XHJcblx0bGV0IHRhc2tQYXJzZXI6IE1hcmtkb3duVGFza1BhcnNlcjtcclxuXHJcblx0YmVmb3JlRWFjaCgoKSA9PiB7XHJcblx0XHQvLyBDcmVhdGUgdGltZSBwYXJzaW5nIHNlcnZpY2Ugd2l0aCB0ZXN0IGNvbmZpZ3VyYXRpb25cclxuXHRcdGNvbnN0IHRpbWVDb25maWc6IFRpbWVQYXJzaW5nQ29uZmlnID0ge1xyXG5cdFx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0XHRzdXBwb3J0ZWRMYW5ndWFnZXM6IFtcImVuXCJdLFxyXG5cdFx0XHRkYXRlS2V5d29yZHM6IHtcclxuXHRcdFx0XHRzdGFydDogW1wic3RhcnRcIiwgXCJmcm9tXCIsIFwiYmVnaW5zXCJdLFxyXG5cdFx0XHRcdGR1ZTogW1wiZHVlXCIsIFwiZGVhZGxpbmVcIiwgXCJieVwiXSxcclxuXHRcdFx0XHRzY2hlZHVsZWQ6IFtcInNjaGVkdWxlZFwiLCBcImF0XCIsIFwiQFwiXSxcclxuXHRcdFx0fSxcclxuXHRcdFx0cmVtb3ZlT3JpZ2luYWxUZXh0OiBmYWxzZSxcclxuXHRcdFx0cGVyTGluZVByb2Nlc3Npbmc6IHRydWUsXHJcblx0XHRcdHJlYWxUaW1lUmVwbGFjZW1lbnQ6IGZhbHNlLFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aW1lUGFyc2luZ1NlcnZpY2UgPSBuZXcgVGltZVBhcnNpbmdTZXJ2aWNlKHRpbWVDb25maWcpO1xyXG5cclxuXHRcdC8vIENyZWF0ZSB0YXNrIHBhcnNlciB3aXRoIHRpbWUgcGFyc2luZyBzZXJ2aWNlXHJcblx0XHRjb25zdCBwYXJzZXJDb25maWc6IFBhcnRpYWw8VGFza1BhcnNlckNvbmZpZz4gPSB7XHJcblx0XHRcdHBhcnNlTWV0YWRhdGE6IHRydWUsXHJcblx0XHRcdHBhcnNlVGFnczogdHJ1ZSxcclxuXHRcdFx0cGFyc2VDb21tZW50czogZmFsc2UsXHJcblx0XHRcdHBhcnNlSGVhZGluZ3M6IGZhbHNlLFxyXG5cdFx0XHRtZXRhZGF0YVBhcnNlTW9kZTogTWV0YWRhdGFQYXJzZU1vZGUuQm90aCxcclxuXHRcdH07XHJcblxyXG5cdFx0dGFza1BhcnNlciA9IG5ldyBDb25maWd1cmFibGVUYXNrUGFyc2VyKHBhcnNlckNvbmZpZywgdGltZVBhcnNpbmdTZXJ2aWNlKTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJTaW5nbGUgVGltZSBFeHRyYWN0aW9uXCIsICgpID0+IHtcclxuXHRcdGl0KFwic2hvdWxkIGV4dHJhY3Qgc2luZ2xlIHRpbWUgZnJvbSBpbmxpbmUgdGFza1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1hcmtkb3duID0gXCItIFsgXSBNZWV0aW5nIGF0IDI6MzAgUE1cIjtcclxuXHRcdFx0Y29uc3QgdGFza3MgPSB0YXNrUGFyc2VyLnBhcnNlKG1hcmtkb3duLCBcInRlc3QubWRcIik7XHJcblxyXG5cdFx0XHRleHBlY3QodGFza3MpLnRvSGF2ZUxlbmd0aCgxKTtcclxuXHRcdFx0Y29uc3QgdGFzayA9IHRhc2tzWzBdO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2suY29udGVudCkudG9CZShcIk1lZXRpbmcgYXQgMjozMCBQTVwiKTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgdGltZSBjb21wb25lbnQgKGNvdWxkIGJlIGR1ZVRpbWUgb3Igc2NoZWR1bGVkVGltZSBiYXNlZCBvbiBjb250ZXh0KVxyXG5cdFx0XHRjb25zdCB0aW1lQ29tcG9uZW50ID0gKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmR1ZVRpbWUgfHwgKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnNjaGVkdWxlZFRpbWU7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50KS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QodGltZUNvbXBvbmVudD8uaG91cikudG9CZSgxNCk7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50Py5taW51dGUpLnRvQmUoMzApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aXQoXCJzaG91bGQgZXh0cmFjdCAyNC1ob3VyIGZvcm1hdCB0aW1lXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgbWFya2Rvd24gPSBcIi0gWyBdIENhbGwgY2xpZW50IGF0IDE1OjQ1XCI7XHJcblx0XHRcdGNvbnN0IHRhc2tzID0gdGFza1BhcnNlci5wYXJzZShtYXJrZG93biwgXCJ0ZXN0Lm1kXCIpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzKS50b0hhdmVMZW5ndGgoMSk7XHJcblx0XHRcdGNvbnN0IHRhc2sgPSB0YXNrc1swXTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrLmNvbnRlbnQpLnRvQmUoXCJDYWxsIGNsaWVudCBhdCAxNTo0NVwiKTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgdGltZUNvbXBvbmVudCA9ICh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzPy5kdWVUaW1lIHx8ICh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzPy5zY2hlZHVsZWRUaW1lO1xyXG5cdFx0XHRleHBlY3QodGltZUNvbXBvbmVudCkudG9CZURlZmluZWQoKTtcclxuXHRcdFx0ZXhwZWN0KHRpbWVDb21wb25lbnQ/LmhvdXIpLnRvQmUoMTUpO1xyXG5cdFx0XHRleHBlY3QodGltZUNvbXBvbmVudD8ubWludXRlKS50b0JlKDQ1KTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRkZXNjcmliZShcIlRpbWUgUmFuZ2UgRXh0cmFjdGlvblwiLCAoKSA9PiB7XHJcblx0XHRpdChcInNob3VsZCBleHRyYWN0IHRpbWUgcmFuZ2UgZnJvbSBpbmxpbmUgdGFza1wiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1hcmtkb3duID0gXCItIFsgXSBXb3Jrc2hvcCA5OjAwLTE3OjAwXCI7XHJcblx0XHRcdGNvbnN0IHRhc2tzID0gdGFza1BhcnNlci5wYXJzZShtYXJrZG93biwgXCJ0ZXN0Lm1kXCIpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzKS50b0hhdmVMZW5ndGgoMSk7XHJcblx0XHRcdGNvbnN0IHRhc2sgPSB0YXNrc1swXTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrLmNvbnRlbnQpLnRvQmUoXCJXb3Jrc2hvcCA5OjAwLTE3OjAwXCIpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc3RhcnRUaW1lKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmVuZFRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc3RhcnRUaW1lPy5ob3VyKS50b0JlKDkpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnN0YXJ0VGltZT8ubWludXRlKS50b0JlKDApO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmVuZFRpbWU/LmhvdXIpLnRvQmUoMTcpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmVuZFRpbWU/Lm1pbnV0ZSkudG9CZSgwKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGl0KFwic2hvdWxkIGV4dHJhY3QgMTItaG91ciBmb3JtYXQgdGltZSByYW5nZVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1hcmtkb3duID0gXCItIFsgXSBNZWV0aW5nIDI6MzAgUE0gLSA0OjAwIFBNXCI7XHJcblx0XHRcdGNvbnN0IHRhc2tzID0gdGFza1BhcnNlci5wYXJzZShtYXJrZG93biwgXCJ0ZXN0Lm1kXCIpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzKS50b0hhdmVMZW5ndGgoMSk7XHJcblx0XHRcdGNvbnN0IHRhc2sgPSB0YXNrc1swXTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrLmNvbnRlbnQpLnRvQmUoXCJNZWV0aW5nIDI6MzAgUE0gLSA0OjAwIFBNXCIpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc3RhcnRUaW1lKS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmVuZFRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc3RhcnRUaW1lPy5ob3VyKS50b0JlKDE0KTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzPy5zdGFydFRpbWU/Lm1pbnV0ZSkudG9CZSgzMCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uZW5kVGltZT8uaG91cikudG9CZSgxNik7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uZW5kVGltZT8ubWludXRlKS50b0JlKDApO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdGRlc2NyaWJlKFwiVGltZSB3aXRoIE1ldGFkYXRhIEludGVncmF0aW9uXCIsICgpID0+IHtcclxuXHRcdGl0KFwic2hvdWxkIGNvbWJpbmUgdGltZSBjb21wb25lbnRzIHdpdGggZGF0YXZpZXcgbWV0YWRhdGFcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBtYXJrZG93biA9IFwiLSBbIF0gRG9jdG9yIGFwcG9pbnRtZW50IGF0IDM6MzAgUE0gW2R1ZTo6MjAyNS0wOC0yNV1cIjtcclxuXHRcdFx0Y29uc3QgdGFza3MgPSB0YXNrUGFyc2VyLnBhcnNlKG1hcmtkb3duLCBcInRlc3QubWRcIik7XHJcblxyXG5cdFx0XHRleHBlY3QodGFza3MpLnRvSGF2ZUxlbmd0aCgxKTtcclxuXHRcdFx0Y29uc3QgdGFzayA9IHRhc2tzWzBdO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2suY29udGVudCkudG9CZShcIkRvY3RvciBhcHBvaW50bWVudCBhdCAzOjMwIFBNXCIpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayB0aW1lIGNvbXBvbmVudFxyXG5cdFx0XHRjb25zdCB0aW1lQ29tcG9uZW50ID0gKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmR1ZVRpbWUgfHwgKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnNjaGVkdWxlZFRpbWU7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50KS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QodGltZUNvbXBvbmVudD8uaG91cikudG9CZSgxNSk7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50Py5taW51dGUpLnRvQmUoMzApO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgdGhhdCBlbmhhbmNlZCBkYXRldGltZSB3YXMgY3JlYXRlZFxyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkuZW5oYW5jZWREYXRlcz8uZHVlRGF0ZVRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdGNvbnN0IGR1ZURhdGVUaW1lID0gKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkuZW5oYW5jZWREYXRlcz8uZHVlRGF0ZVRpbWU7XHJcblx0XHRcdGlmIChkdWVEYXRlVGltZSkge1xyXG5cdFx0XHRcdGV4cGVjdChkdWVEYXRlVGltZS5nZXRGdWxsWWVhcigpKS50b0JlKDIwMjUpO1xyXG5cdFx0XHRcdGV4cGVjdChkdWVEYXRlVGltZS5nZXRNb250aCgpKS50b0JlKDcpOyAvLyBBdWd1c3QgKDAtYmFzZWQpXHJcblx0XHRcdFx0ZXhwZWN0KGR1ZURhdGVUaW1lLmdldERhdGUoKSkudG9CZSgyNSk7XHJcblx0XHRcdFx0ZXhwZWN0KGR1ZURhdGVUaW1lLmdldEhvdXJzKCkpLnRvQmUoMTUpO1xyXG5cdFx0XHRcdGV4cGVjdChkdWVEYXRlVGltZS5nZXRNaW51dGVzKCkpLnRvQmUoMzApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRpdChcInNob3VsZCBoYW5kbGUgZW1vamkgbWV0YWRhdGEgd2l0aCB0aW1lIGNvbXBvbmVudHNcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBtYXJrZG93biA9IFwiLSBbIF0gUHJvamVjdCBkZWFkbGluZSBhdCA1OjAwIFBNIPCfk4UgMjAyNS0wOC0yNVwiO1xyXG5cdFx0XHRjb25zdCB0YXNrcyA9IHRhc2tQYXJzZXIucGFyc2UobWFya2Rvd24sIFwidGVzdC5tZFwiKTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrcykudG9IYXZlTGVuZ3RoKDEpO1xyXG5cdFx0XHRjb25zdCB0YXNrID0gdGFza3NbMF07XHJcblxyXG5cdFx0XHRleHBlY3QodGFzay5jb250ZW50KS50b0JlKFwiUHJvamVjdCBkZWFkbGluZSBhdCA1OjAwIFBNXCIpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHMpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCB0aW1lQ29tcG9uZW50ID0gKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmR1ZVRpbWUgfHwgKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnNjaGVkdWxlZFRpbWU7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50KS50b0JlRGVmaW5lZCgpO1xyXG5cdFx0XHRleHBlY3QodGltZUNvbXBvbmVudD8uaG91cikudG9CZSgxNyk7XHJcblx0XHRcdGV4cGVjdCh0aW1lQ29tcG9uZW50Py5taW51dGUpLnRvQmUoMCk7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBlbmhhbmNlZCBkYXRldGltZVxyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkuZW5oYW5jZWREYXRlcz8uZHVlRGF0ZVRpbWUpLnRvQmVEZWZpbmVkKCk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJNdWx0aXBsZSBUYXNrc1wiLCAoKSA9PiB7XHJcblx0XHRpdChcInNob3VsZCBleHRyYWN0IHRpbWUgY29tcG9uZW50cyBmcm9tIG11bHRpcGxlIHRhc2tzXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgbWFya2Rvd24gPSBgLSBbIF0gTW9ybmluZyBtZWV0aW5nIGF0IDk6MDAgQU1cclxuLSBbIF0gTHVuY2ggYnJlYWsgMTI6MDAtMTM6MDBcclxuLSBbIF0gQWZ0ZXJub29uIGNhbGwgYXQgMzozMCBQTWA7XHJcblxyXG5cdFx0XHRjb25zdCB0YXNrcyA9IHRhc2tQYXJzZXIucGFyc2UobWFya2Rvd24sIFwidGVzdC5tZFwiKTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrcykudG9IYXZlTGVuZ3RoKDMpO1xyXG5cclxuXHRcdFx0Ly8gRmlyc3QgdGFza1xyXG5cdFx0XHRleHBlY3QodGFza3NbMF0uY29udGVudCkudG9CZShcIk1vcm5pbmcgbWVldGluZyBhdCA5OjAwIEFNXCIpO1xyXG5cdFx0XHRjb25zdCB0aW1lMSA9ICh0YXNrc1swXS5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uZHVlVGltZSB8fCAodGFza3NbMF0ubWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnNjaGVkdWxlZFRpbWU7XHJcblx0XHRcdGV4cGVjdCh0aW1lMT8uaG91cikudG9CZSg5KTtcclxuXHRcdFx0ZXhwZWN0KHRpbWUxPy5taW51dGUpLnRvQmUoMCk7XHJcblxyXG5cdFx0XHQvLyBTZWNvbmQgdGFzayAodGltZSByYW5nZSlcclxuXHRcdFx0ZXhwZWN0KHRhc2tzWzFdLmNvbnRlbnQpLnRvQmUoXCJMdW5jaCBicmVhayAxMjowMC0xMzowMFwiKTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrc1sxXS5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc3RhcnRUaW1lPy5ob3VyKS50b0JlKDEyKTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrc1sxXS5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uZW5kVGltZT8uaG91cikudG9CZSgxMyk7XHJcblxyXG5cdFx0XHQvLyBUaGlyZCB0YXNrXHJcblx0XHRcdGV4cGVjdCh0YXNrc1syXS5jb250ZW50KS50b0JlKFwiQWZ0ZXJub29uIGNhbGwgYXQgMzozMCBQTVwiKTtcclxuXHRcdFx0Y29uc3QgdGltZTMgPSAodGFza3NbMl0ubWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmR1ZVRpbWUgfHwgKHRhc2tzWzJdLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzPy5zY2hlZHVsZWRUaW1lO1xyXG5cdFx0XHRleHBlY3QodGltZTM/LmhvdXIpLnRvQmUoMTUpO1xyXG5cdFx0XHRleHBlY3QodGltZTM/Lm1pbnV0ZSkudG9CZSgzMCk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0ZGVzY3JpYmUoXCJIaWVyYXJjaGljYWwgVGFza3NcIiwgKCkgPT4ge1xyXG5cdFx0aXQoXCJzaG91bGQgZXh0cmFjdCB0aW1lIGNvbXBvbmVudHMgZnJvbSBuZXN0ZWQgdGFza3NcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBtYXJrZG93biA9IGAtIFsgXSBQcm9qZWN0IG1lZXRpbmcgMjowMCBQTSAtIDQ6MDAgUE1cclxuICAtIFsgXSBSZXZpZXcgYWdlbmRhIGF0IDE6NDUgUE1cclxuICAtIFsgXSBQcmVwYXJlIHNsaWRlcyBhdCAxOjMwIFBNYDtcclxuXHJcblx0XHRcdGNvbnN0IHRhc2tzID0gdGFza1BhcnNlci5wYXJzZShtYXJrZG93biwgXCJ0ZXN0Lm1kXCIpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzKS50b0hhdmVMZW5ndGgoMyk7XHJcblxyXG5cdFx0XHQvLyBQYXJlbnQgdGFzayAodGltZSByYW5nZSlcclxuXHRcdFx0ZXhwZWN0KHRhc2tzWzBdLmNvbnRlbnQpLnRvQmUoXCJQcm9qZWN0IG1lZXRpbmcgMjowMCBQTSAtIDQ6MDAgUE1cIik7XHJcblx0XHRcdGV4cGVjdCgodGFza3NbMF0ubWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnN0YXJ0VGltZT8uaG91cikudG9CZSgxNCk7XHJcblx0XHRcdGV4cGVjdCgodGFza3NbMF0ubWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LmVuZFRpbWU/LmhvdXIpLnRvQmUoMTYpO1xyXG5cclxuXHRcdFx0Ly8gQ2hpbGQgdGFza3NcclxuXHRcdFx0ZXhwZWN0KHRhc2tzWzFdLmNvbnRlbnQpLnRvQmUoXCJSZXZpZXcgYWdlbmRhIGF0IDE6NDUgUE1cIik7XHJcblx0XHRcdGNvbnN0IHRpbWUxID0gKHRhc2tzWzFdLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzPy5kdWVUaW1lIHx8ICh0YXNrc1sxXS5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uc2NoZWR1bGVkVGltZTtcclxuXHRcdFx0ZXhwZWN0KHRpbWUxPy5ob3VyKS50b0JlKDEzKTtcclxuXHRcdFx0ZXhwZWN0KHRpbWUxPy5taW51dGUpLnRvQmUoNDUpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzWzJdLmNvbnRlbnQpLnRvQmUoXCJQcmVwYXJlIHNsaWRlcyBhdCAxOjMwIFBNXCIpO1xyXG5cdFx0XHRjb25zdCB0aW1lMiA9ICh0YXNrc1syXS5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS50aW1lQ29tcG9uZW50cz8uZHVlVGltZSB8fCAodGFza3NbMl0ubWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHM/LnNjaGVkdWxlZFRpbWU7XHJcblx0XHRcdGV4cGVjdCh0aW1lMj8uaG91cikudG9CZSgxMyk7XHJcblx0XHRcdGV4cGVjdCh0aW1lMj8ubWludXRlKS50b0JlKDMwKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRkZXNjcmliZShcIkVycm9yIEhhbmRsaW5nXCIsICgpID0+IHtcclxuXHRcdGl0KFwic2hvdWxkIGhhbmRsZSB0YXNrcyB3aXRob3V0IHRpbWUgaW5mb3JtYXRpb24gZ3JhY2VmdWxseVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1hcmtkb3duID0gXCItIFsgXSBTaW1wbGUgdGFzayB3aXRob3V0IHRpbWVcIjtcclxuXHRcdFx0Y29uc3QgdGFza3MgPSB0YXNrUGFyc2VyLnBhcnNlKG1hcmtkb3duLCBcInRlc3QubWRcIik7XHJcblxyXG5cdFx0XHRleHBlY3QodGFza3MpLnRvSGF2ZUxlbmd0aCgxKTtcclxuXHRcdFx0Y29uc3QgdGFzayA9IHRhc2tzWzBdO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2suY29udGVudCkudG9CZShcIlNpbXBsZSB0YXNrIHdpdGhvdXQgdGltZVwiKTtcclxuXHRcdFx0ZXhwZWN0KCh0YXNrLm1ldGFkYXRhIGFzIEVuaGFuY2VkU3RhbmRhcmRUYXNrTWV0YWRhdGEpLnRpbWVDb21wb25lbnRzKS50b0JlVW5kZWZpbmVkKCk7XHJcblx0XHRcdGV4cGVjdCgodGFzay5tZXRhZGF0YSBhcyBFbmhhbmNlZFN0YW5kYXJkVGFza01ldGFkYXRhKS5lbmhhbmNlZERhdGVzKS50b0JlVW5kZWZpbmVkKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpdChcInNob3VsZCBoYW5kbGUgaW52YWxpZCB0aW1lIGZvcm1hdHMgZ3JhY2VmdWxseVwiLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG1hcmtkb3duID0gXCItIFsgXSBUYXNrIHdpdGggaW52YWxpZCB0aW1lIDI1Ojk5XCI7XHJcblx0XHRcdGNvbnN0IHRhc2tzID0gdGFza1BhcnNlci5wYXJzZShtYXJrZG93biwgXCJ0ZXN0Lm1kXCIpO1xyXG5cclxuXHRcdFx0ZXhwZWN0KHRhc2tzKS50b0hhdmVMZW5ndGgoMSk7XHJcblx0XHRcdGNvbnN0IHRhc2sgPSB0YXNrc1swXTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrLmNvbnRlbnQpLnRvQmUoXCJUYXNrIHdpdGggaW52YWxpZCB0aW1lIDI1Ojk5XCIpO1xyXG5cdFx0XHQvLyBTaG91bGQgbm90IGNyYXNoLCBtYXkgb3IgbWF5IG5vdCBoYXZlIHRpbWUgY29tcG9uZW50cyBkZXBlbmRpbmcgb24gcGFyc2luZ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aXQoXCJzaG91bGQgd29yayB3aXRob3V0IHRpbWUgcGFyc2luZyBzZXJ2aWNlXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcGFyc2VyV2l0aG91dFRpbWUgPSBuZXcgQ29uZmlndXJhYmxlVGFza1BhcnNlcigpO1xyXG5cdFx0XHRjb25zdCBtYXJrZG93biA9IFwiLSBbIF0gTWVldGluZyBhdCAyOjMwIFBNXCI7XHJcblx0XHRcdGNvbnN0IHRhc2tzID0gcGFyc2VyV2l0aG91dFRpbWUucGFyc2UobWFya2Rvd24sIFwidGVzdC5tZFwiKTtcclxuXHJcblx0XHRcdGV4cGVjdCh0YXNrcykudG9IYXZlTGVuZ3RoKDEpO1xyXG5cdFx0XHRjb25zdCB0YXNrID0gdGFza3NbMF07XHJcblxyXG5cdFx0XHRleHBlY3QodGFzay5jb250ZW50KS50b0JlKFwiTWVldGluZyBhdCAyOjMwIFBNXCIpO1xyXG5cdFx0XHRleHBlY3QoKHRhc2subWV0YWRhdGEgYXMgRW5oYW5jZWRTdGFuZGFyZFRhc2tNZXRhZGF0YSkudGltZUNvbXBvbmVudHMpLnRvQmVVbmRlZmluZWQoKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59KTsiXX0=